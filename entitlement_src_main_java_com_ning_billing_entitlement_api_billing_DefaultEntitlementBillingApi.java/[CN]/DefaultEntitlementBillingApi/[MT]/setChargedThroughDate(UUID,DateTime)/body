{
  SubscriptionData subscription=(SubscriptionData)dao.getSubscriptionFromId(subscriptionId);
  if (subscription == null) {
    throw new EntitlementBillingApiException(ErrorCode.ENT_INVALID_SUBSCRIPTION_ID,subscriptionId.toString());
  }
  SubscriptionBuilder builder=new SubscriptionBuilder(subscription).setChargedThroughDate(ctd).setPaidThroughDate(subscription.getPaidThroughDate());
  dao.updateSubscription(new SubscriptionData(builder));
}
