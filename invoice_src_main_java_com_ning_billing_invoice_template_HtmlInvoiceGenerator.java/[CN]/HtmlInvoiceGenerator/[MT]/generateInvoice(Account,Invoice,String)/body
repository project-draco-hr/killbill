{
  final Map<String,Object> data=new HashMap<String,Object>();
  final DefaultInvoiceTranslator invoiceTranslator=new DefaultInvoiceTranslator(config);
  final Locale locale=new Locale(account.getLocale());
  invoiceTranslator.setLocale(locale);
  data.put("text",invoiceTranslator);
  data.put("account",account);
  final InvoiceFormatter formattedInvoice=factory.createInvoiceFormatter(config,invoice,locale);
  data.put("invoice",formattedInvoice);
  return templateEngine.executeTemplate(templateName,data);
}
