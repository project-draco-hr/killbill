{
  final Account account=Mockito.mock(Account.class);
  Mockito.when(account.getId()).thenReturn(UUID.randomUUID());
  directPaymentStateContext=new DirectPaymentStateContext(directPaymentId,null,directPaymentExternalKey,directPaymentTransactionExternalKey,TransactionType.CAPTURE,account,UUID.randomUUID(),amount,currency,false,ImmutableList.<PluginProperty>of(),internalCallContext,callContext);
  return new DirectPaymentAutomatonDAOHelper(directPaymentStateContext,clock.getUTCNow(),paymentDao,registry,internalCallContext);
}
