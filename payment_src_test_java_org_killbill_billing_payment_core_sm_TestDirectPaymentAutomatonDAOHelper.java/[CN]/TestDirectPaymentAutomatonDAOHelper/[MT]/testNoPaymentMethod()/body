{
  final DirectPaymentAutomatonDAOHelper daoHelper=createDAOHelper(UUID.randomUUID(),directPaymentExternalKey,directPaymentTransactionExternalKey,amount,currency);
  try {
    daoHelper.getPaymentProviderPlugin();
    Assert.fail();
  }
 catch (  final PaymentApiException e) {
    Assert.assertEquals(e.getCode(),ErrorCode.PAYMENT_NO_SUCH_PAYMENT_METHOD.getCode());
  }
}
