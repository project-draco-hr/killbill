{
  if (addContextHeader) {
    builder.addHeader(JaxrsResource.HDR_CREATED_BY,createdBy);
    builder.addHeader(JaxrsResource.HDR_REASON,reason);
    builder.addHeader(JaxrsResource.HDR_COMMENT,comment);
  }
  if (username != null && password != null) {
    final Realm realm=new Realm.RealmBuilder().setPrincipal(username).setPassword(password).setUsePreemptiveAuth(true).setScheme(AuthScheme.BASIC).build();
    builder.setRealm(realm);
  }
  Response response=null;
  try {
    final ListenableFuture<Response> futureStatus=builder.execute(new AsyncCompletionHandler<Response>(){
      @Override public Response onCompleted(      final Response response) throws Exception {
        return response;
      }
    }
);
    response=futureStatus.get(timeoutSec,TimeUnit.SECONDS);
  }
 catch (  final Exception e) {
    Assert.fail(e.getMessage());
  }
  Assert.assertNotNull(response);
  return response;
}
