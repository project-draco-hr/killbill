{
  final String invoicesURI=JaxrsResource.INVOICES_PATH;
  final Map<String,String> queryParams=new HashMap<String,String>();
  queryParams.put(JaxrsResource.QUERY_ACCOUNT_ID,accountId);
  queryParams.put(JaxrsResource.QUERY_INVOICE_WITH_ITEMS,withItems.toString());
  queryParams.put(JaxrsResource.QUERY_AUDIT,auditLevel.toString());
  final Response invoicesResponse=doGet(invoicesURI,queryParams,DEFAULT_HTTP_TIMEOUT_SEC);
  assertEquals(invoicesResponse.getStatusCode(),Status.OK.getStatusCode());
  final String invoicesBaseJson=invoicesResponse.getResponseBody();
  final List<T> invoices=mapper.readValue(invoicesBaseJson,clazz);
  assertNotNull(invoices);
  return invoices;
}
