{
  for (  final InvoiceItemModelDao item : invoiceItems) {
    if (item.getType() == InvoiceItemType.RECURRING) {
      if ((item.getEndDate() != null) && (item.getAmount() == null || item.getAmount().compareTo(BigDecimal.ZERO) >= 0)) {
        nextBillingDatePoster.insertNextBillingNotification(entitySqlDaoWrapperFactory,accountId,item.getSubscriptionId(),item.getEndDate().toDateTimeAtCurrentTime());
      }
    }
  }
}
