{
  invoicePaymentSqlDao.inTransaction(new Transaction<Void,InvoicePaymentSqlDao>(){
    @Override public Void inTransaction(    InvoicePaymentSqlDao transactional,    TransactionStatus status) throws Exception {
      transactional.notifyOfPaymentAttempt(invoicePayment,context);
      String invoicePaymentId=invoicePayment.getId().toString();
      Long recordId=transactional.getRecordId(invoicePaymentId);
      EntityAudit audit=new EntityAudit(TableName.INVOICE_PAYMENTS,recordId,ChangeType.INSERT);
      transactional.insertAuditFromTransaction(audit,context);
      return null;
    }
  }
);
}
