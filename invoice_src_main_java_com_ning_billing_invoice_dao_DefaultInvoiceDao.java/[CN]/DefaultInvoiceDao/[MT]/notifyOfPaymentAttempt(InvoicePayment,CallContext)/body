{
  invoicePaymentSqlDao.inTransaction(new Transaction<Void,InvoicePaymentSqlDao>(){
    @Override public Void inTransaction(    InvoicePaymentSqlDao transactional,    TransactionStatus status) throws Exception {
      transactional.notifyOfPaymentAttempt(invoicePayment,context);
      String invoicePaymentId=invoicePayment.getId().toString();
      Long recordId=transactional.getRecordId(TableName.INVOICE_PAYMENTS,invoicePaymentId);
      EntityAudit audit=new EntityAudit(recordId,ChangeType.INSERT);
      transactional.insertAuditFromTransaction(TableName.INVOICE_PAYMENTS,audit,context);
      return null;
    }
  }
);
}
