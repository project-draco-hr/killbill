{
  for (  final InvoiceItem item : newProposedItems) {
    SubscriptionFutureNotificationDates subscriptionFutureNotificationDates=perSubscriptionFutureNotificationDates.get(subscriptionId);
    if (subscriptionFutureNotificationDates == null) {
      subscriptionFutureNotificationDates=new SubscriptionFutureNotificationDates();
      perSubscriptionFutureNotificationDates.put(subscriptionId,subscriptionFutureNotificationDates);
    }
    subscriptionFutureNotificationDates.updateNextUsageDateIfRequired(item.getUsageName(),item.getEndDate());
  }
}
