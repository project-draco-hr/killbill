{
  final Account accountJson=getAccount();
  final PaymentMethodPluginDetail info=new PaymentMethodPluginDetail();
  info.setProperties(null);
  final String paymentMethodExternalKey=UUID.randomUUID().toString();
  final PaymentMethod paymentMethodJson=new PaymentMethod(null,paymentMethodExternalKey,null,true,PLUGIN_NAME,info);
  final String paymentExternalKey=UUID.randomUUID().toString();
  final String authTransactionExternalKey=UUID.randomUUID().toString();
  final PaymentTransaction authTransactionJson=new PaymentTransaction();
  authTransactionJson.setAmount(BigDecimal.TEN);
  authTransactionJson.setCurrency(accountJson.getCurrency());
  authTransactionJson.setPaymentExternalKey(paymentExternalKey);
  authTransactionJson.setTransactionExternalKey(authTransactionExternalKey);
  authTransactionJson.setTransactionType("AUTHORIZE");
  final ComboPaymentTransaction comboPaymentTransaction=new ComboPaymentTransaction(accountJson,paymentMethodJson,authTransactionJson,ImmutableList.<PluginProperty>of(),ImmutableList.<PluginProperty>of());
  final Payment payment=killBillClient.createPayment(comboPaymentTransaction,ImmutableMap.<String,String>of(),createdBy,reason,comment);
  verifyComboPayment(payment,paymentExternalKey,BigDecimal.TEN,BigDecimal.ZERO,BigDecimal.ZERO,1,1);
  final String voidTransactionExternalKey=UUID.randomUUID().toString();
  final Payment voidPayment=killBillClient.voidPayment(null,paymentExternalKey,voidTransactionExternalKey,ImmutableMap.<String,String>of(),createdBy,reason,comment);
  verifyPaymentTransaction(voidPayment.getPaymentId(),voidPayment.getTransactions().get(1),paymentExternalKey,voidTransactionExternalKey,accountJson,null,"VOID");
}
