{
  final IDBI idbi=Mockito.mock(IDBI.class);
  invoiceSqlDao=Mockito.mock(InvoiceSqlDao.class);
  Mockito.when(idbi.onDemand(InvoiceSqlDao.class)).thenReturn(invoiceSqlDao);
  final NextBillingDatePoster poster=Mockito.mock(NextBillingDatePoster.class);
  final TagDefinitionDao tagDefinitionDao=new MockTagDefinitionDao();
  final TagDao tagDao=new MockTagDao();
  tagUserApi=new DefaultTagUserApi(tagDefinitionDao,tagDao);
  dao=new DefaultInvoiceDao(idbi,poster,tagUserApi,Mockito.mock(Clock.class));
}
