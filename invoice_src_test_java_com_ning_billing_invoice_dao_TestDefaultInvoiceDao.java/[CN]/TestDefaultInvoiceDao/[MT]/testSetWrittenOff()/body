{
  final UUID invoiceId=UUID.randomUUID();
  final Map<String,Tag> beforeTags=tagUserApi.getTags(invoiceId,ObjectType.INVOICE);
  Assert.assertEquals(beforeTags.keySet().size(),0);
  dao.setWrittenOff(invoiceId,Mockito.mock(CallContext.class));
  final Map<String,Tag> afterTags=tagUserApi.getTags(invoiceId,ObjectType.INVOICE);
  Assert.assertEquals(afterTags.keySet().size(),1);
  final UUID tagDefinitionId=ControlTagType.WRITTEN_OFF.getId();
  Assert.assertEquals(afterTags.values().iterator().next().getTagDefinitionId(),tagDefinitionId);
}
