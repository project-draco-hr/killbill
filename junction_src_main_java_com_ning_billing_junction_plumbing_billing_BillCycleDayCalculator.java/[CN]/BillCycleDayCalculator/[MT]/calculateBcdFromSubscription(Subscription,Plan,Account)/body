{
  final PhaseType currentPhaseType=subscription.getCurrentPhase() != null ? subscription.getCurrentPhase().getPhaseType() : null;
  final DateTime date=plan.dateOfFirstRecurringNonZeroCharge(subscription.getStartDate(),currentPhaseType);
  final CalculatedBillCycleDay calculatedBillCycleDay=new CalculatedBillCycleDay(account.getTimeZone(),date);
  log.info("Calculated BCD: subscription id {}, subscription start {}, timezone {}, bcd UTC {}, bcd local {}",new Object[]{subscription.getId(),date.toDateTimeISO(),account.getTimeZone(),calculatedBillCycleDay.getDayOfMonthUTC(),calculatedBillCycleDay.getDayOfMonthLocal()});
  return calculatedBillCycleDay;
}
