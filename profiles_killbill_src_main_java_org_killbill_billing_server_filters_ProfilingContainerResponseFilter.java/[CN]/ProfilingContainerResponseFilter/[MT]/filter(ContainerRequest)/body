{
  final List<String> profilingHeaderRequests=request.getRequestHeader(PROFILING_HEADER_REQ);
  final String profilingHeaderRequest=profilingHeaderRequests.isEmpty() ? null : profilingHeaderRequests.get(0);
  if (profilingHeaderRequest != null) {
    try {
      final ProfilingDataOutput profilingOutput=ProfilingDataOutput.valueOf(profilingHeaderRequest);
      Profiling.setPerThreadProfilingData(profilingOutput);
    }
 catch (    IllegalArgumentException e) {
      logger.info("Profiling data output " + profilingHeaderRequest + " is not supported, profiling NOT enabled");
    }
  }
  return request;
}
