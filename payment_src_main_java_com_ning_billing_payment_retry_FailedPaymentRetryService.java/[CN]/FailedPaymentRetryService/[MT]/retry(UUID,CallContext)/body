{
  try {
    PaymentInfoEvent paymentInfo=paymentApi.getPaymentInfoForPaymentAttemptId(paymentAttemptId);
    if (paymentInfo == null) {
      log.error(String.format("Failed to retry payment for paymentId %s: no such PaymentInfo",paymentAttemptId));
      return;
    }
    if (paymentInfo != null && PaymentStatus.Processed.equals(PaymentStatus.valueOf(paymentInfo.getStatus()))) {
      return;
    }
    Account account=accountUserApi.getAccountById(paymentInfo.getAccountId());
    paymentApi.createPaymentForPaymentAttempt(account.getExternalKey(),paymentAttemptId,context);
  }
 catch (  PaymentApiException e) {
    log.error(String.format("Failed to retry payment for %s",paymentAttemptId),e);
  }
catch (  AccountApiException e) {
    log.error(String.format("Failed to retry payment for %s",paymentAttemptId),e);
  }
}
