{
  final Invoice invoice=invoiceApi.getInvoice(UUID.fromString(invoiceId));
  if (invoice == null) {
    throw new InvoiceApiException(ErrorCode.INVOICE_NOT_FOUND,invoiceId);
  }
 else {
    final InvoiceJsonSimple json=withItems ? new InvoiceJsonWithItems(invoice) : new InvoiceJsonSimple(invoice);
    return Response.status(Status.OK).entity(json).build();
  }
}
