{
  final TenantContext tenantContext=context.createContext(request);
  final List<Payment> payments=paymentApi.getInvoicePayments(UUID.fromString(invoiceId),tenantContext);
  final AuditLogsForPayments auditLogsForPayments=auditUserApi.getAuditLogsForPayments(payments,auditMode.getLevel(),tenantContext);
  final List<PaymentJson> result=new ArrayList<PaymentJson>(payments.size());
  for (  final Payment cur : payments) {
    result.add(new PaymentJson(cur,auditLogsForPayments.getPaymentsAuditLogs().get(cur.getId())));
  }
  return Response.status(Status.OK).entity(result).build();
}
