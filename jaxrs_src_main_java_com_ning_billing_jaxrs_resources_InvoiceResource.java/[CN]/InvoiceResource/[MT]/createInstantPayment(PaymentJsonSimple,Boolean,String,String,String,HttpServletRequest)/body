{
  final CallContext callContext=context.createContext(createdBy,reason,comment,request);
  final Account account=accountApi.getAccountById(UUID.fromString(payment.getAccountId()),callContext);
  final UUID invoiceId=UUID.fromString(payment.getInvoiceId());
  if (externalPayment) {
    paymentApi.createExternalPayment(account,invoiceId,payment.getAmount(),callContext);
  }
 else {
    paymentApi.createPayment(account,invoiceId,payment.getAmount(),callContext);
  }
  return uriBuilder.buildResponse(InvoiceResource.class,"getPayments",payment.getInvoiceId());
}
