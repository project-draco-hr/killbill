{
synchronized (pluginMonitor) {
    try {
      checkPluginIsRunning();
switch (cb.getPluginType()) {
case NOTIFICATION:
        checkValidNotificationPlugin();
      break;
case PAYMENT:
    checkValidPaymentPlugin();
  break;
case CURRENCY:
checkValidCurrencyPlugin();
break;
default :
break;
}
final Ruby runtime=getRuntime();
return cb.doCall(runtime);
}
 catch (final RuntimeException e) {
log.warn("RuntimeException in jruby plugin ",e);
throw e;
}
}
}
