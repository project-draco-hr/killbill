{
  final String lockName=getLockName(service,lockKey);
  int tries_left=retry;
  while (tries_left-- > 0) {
    final GlobalLock lock=lock(lockName);
    if (lock != null) {
      return lock;
    }
  }
  throw new LockFailedException();
}
