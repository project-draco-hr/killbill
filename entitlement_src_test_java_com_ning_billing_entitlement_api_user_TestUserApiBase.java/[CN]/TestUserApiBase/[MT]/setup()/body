{
  loadSystemPropertiesFromClasspath("/entitlement.properties");
  final Injector g=getInjector();
  entitlementService=g.getInstance(EntitlementService.class);
  catalogService=g.getInstance(CatalogService.class);
  busService=g.getInstance(EventBusService.class);
  config=g.getInstance(EntitlementConfig.class);
  dao=g.getInstance(EntitlementDao.class);
  clock=(ClockMock)g.getInstance(Clock.class);
  try {
    ((DefaultCatalogService)catalogService).loadCatalog();
    ((DefaultEventBusService)busService).startBus();
    ((Engine)entitlementService).initialize();
    init();
  }
 catch (  EntitlementUserApiException e) {
    Assert.fail(e.getMessage());
  }
catch (  ServiceException e) {
    Assert.fail(e.getMessage());
  }
}
