{
  try {
    final Catalog catalog=getCatalog(context);
    return catalog.findPlan(invoiceItem.getPlanName(),invoiceItem.getStartDate().toDateTimeAtStartOfDay());
  }
 catch (  CatalogApiException e) {
    logService.log(LogService.LOG_WARNING,"Unable to retrieve plan for invoice item " + invoiceItem.getId(),e);
    throw new AnalyticsRefreshException(e);
  }
}
