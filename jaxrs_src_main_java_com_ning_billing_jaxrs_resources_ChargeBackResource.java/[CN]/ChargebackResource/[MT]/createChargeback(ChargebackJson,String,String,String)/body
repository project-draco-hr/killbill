{
  try {
    invoicePaymentApi.processChargeback(UUID.fromString(json.getPaymentId()),json.getChargebackAmount(),context.createContext(createdBy,reason,comment));
    return uriBuilder.buildResponse(ChargebackResource.class,"getChargeback",json.getPaymentId());
  }
 catch (  InvoiceApiException e) {
    final String error=String.format("Failed to create chargeback %s",json);
    log.info(error,e);
    return Response.status(Response.Status.BAD_REQUEST).entity(error).build();
  }
catch (  IllegalArgumentException e) {
    return Response.status(Response.Status.BAD_REQUEST).entity(e.getMessage()).build();
  }
}
