{
  final SortedSet<Invoice> unpaidInvoices=unpaidInvoicesForAccount(accountId);
  final SortedSet<Invoice> result=new TreeSet<Invoice>(new InvoiceDateComparator());
  result.addAll(unpaidInvoices);
  for (  final Invoice invoice : unpaidInvoices) {
    if (!invoiceHasAnItemFromBundle(invoice,bundleId)) {
      result.remove(invoice);
    }
  }
  return result;
}
