{
  int lastDayOfMonth=date.dayOfMonth().getMaximumValue();
  DateTime proposedDate;
  if (billingCycleDay > lastDayOfMonth) {
    proposedDate=buildDate(date.getYear(),date.getMonthOfYear(),lastDayOfMonth);
  }
 else {
    proposedDate=buildDate(date.getYear(),date.getMonthOfYear(),billingCycleDay);
  }
  while (proposedDate.isBefore(date)) {
    proposedDate=proposedDate.plusMonths(1);
  }
  return proposedDate;
}
