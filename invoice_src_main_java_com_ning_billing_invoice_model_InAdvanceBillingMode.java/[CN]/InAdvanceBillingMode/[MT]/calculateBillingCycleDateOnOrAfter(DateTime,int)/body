{
  int lastDayOfMonth=date.dayOfMonth().getMaximumValue();
  DateTime proposedDate;
  if (billingCycleDay > lastDayOfMonth) {
    proposedDate=new DateTime(date.getYear(),date.getMonthOfYear(),lastDayOfMonth,date.getHourOfDay(),date.getMinuteOfHour(),date.getSecondOfMinute(),date.getMillisOfSecond());
  }
 else {
    proposedDate=new DateTime(date.getYear(),date.getMonthOfYear(),billingCycleDay,date.getHourOfDay(),date.getMinuteOfHour(),date.getSecondOfMinute(),date.getMillisOfSecond());
  }
  while (proposedDate.isBefore(date)) {
    proposedDate=proposedDate.plusMonths(1);
  }
  return proposedDate;
}
