{
  if (json.getPaymentId() != null) {
    return UUID.fromString(json.getPaymentId());
  }
  verifyNonNullOrEmpty(json.getPaymentExternalKey(),"Payment ExternalKey should not be null");
  return paymentApi.getPaymentByExternalKey(json.getPaymentExternalKey(),false,ImmutableList.<PluginProperty>of(),tenantContext).getId();
}
