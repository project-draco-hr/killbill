{
  logger.debug("Entering state {} with result {}",newState.getName(),operationResult);
  Preconditions.checkState(directPaymentStateContext.getDirectPaymentTransactionModelDao() != null && directPaymentStateContext.getDirectPaymentTransactionModelDao().getId() != null);
  final PaymentTransactionInfoPlugin paymentInfoPlugin=directPaymentStateContext.getPaymentInfoPlugin();
  final TransactionStatus paymentStatus=paymentPluginStatusToPaymentStatus(paymentInfoPlugin,operationResult);
  daoHelper.processPaymentInfoPlugin(paymentStatus,paymentInfoPlugin,newState.getName());
}
