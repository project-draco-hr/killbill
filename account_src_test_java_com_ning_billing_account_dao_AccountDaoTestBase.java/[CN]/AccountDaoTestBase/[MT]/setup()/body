{
  try {
    module=new AccountModuleMock();
    final String accountDdl=IOUtils.toString(AccountSqlDao.class.getResourceAsStream("/com/ning/billing/account/ddl.sql"));
    final String invoiceDdl=IOUtils.toString(AccountSqlDao.class.getResourceAsStream("/com/ning/billing/invoice/ddl.sql"));
    final String utilDdl=IOUtils.toString(AccountSqlDao.class.getResourceAsStream("/com/ning/billing/util/ddl.sql"));
    module.startDb();
    module.initDb(accountDdl);
    module.initDb(invoiceDdl);
    module.initDb(utilDdl);
    final Injector injector=Guice.createInjector(Stage.DEVELOPMENT,module);
    dbi=injector.getInstance(IDBI.class);
    accountDao=injector.getInstance(AccountDao.class);
    accountDao.test();
    BusService busService=injector.getInstance(BusService.class);
    ((DefaultEventBusService)busService).startBus();
  }
 catch (  Throwable t) {
    fail(t.toString());
  }
}
