{
  final PaymentProviderPlugin plugin=getPaymentProviderPlugin(account);
  List<Either<PaymentErrorEvent,PaymentInfoEvent>> result=plugin.processRefund(account);
  List<PaymentInfoEvent> info=new LinkedList<PaymentInfoEvent>();
  for (  Either<PaymentErrorEvent,PaymentInfoEvent> cur : result) {
    if (cur.isLeft()) {
      throw new PaymentApiException(ErrorCode.PAYMENT_CREATE_REFUND,account.getId(),cur.getLeft().getMessage());
    }
    info.add(cur.getRight());
  }
  return info;
}
