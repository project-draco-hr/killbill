{
  return new WithAccountLock<PaymentInfoEvent>().processAccountWithLock(locker,account.getExternalKey(),new WithAccountLockCallback<PaymentInfoEvent>(){
    @Override public PaymentInfoEvent doOperation() throws PaymentApiException {
      return createPaymentWithAccountLocked(account,invoiceId,context);
    }
  }
);
}
