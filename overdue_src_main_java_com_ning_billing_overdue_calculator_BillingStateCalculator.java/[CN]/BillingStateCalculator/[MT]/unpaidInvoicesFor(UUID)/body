{
  Collection<Invoice> invoices=invoiceApi.getUnpaidInvoicesByAccountId(id,clock.getUTCNow());
  SortedSet<Invoice> sortedInvoices=new TreeSet<Invoice>(new Comparator<Invoice>(){
    @Override public int compare(    Invoice i1,    Invoice i2){
      DateTime d1=i1.getInvoiceDate();
      DateTime d2=i2.getInvoiceDate();
      if (d1.compareTo(d2) == 0) {
        return i1.hashCode() - i2.hashCode();
      }
      return d1.compareTo(d2);
    }
  }
);
  sortedInvoices.addAll(invoices);
  return sortedInvoices;
}
