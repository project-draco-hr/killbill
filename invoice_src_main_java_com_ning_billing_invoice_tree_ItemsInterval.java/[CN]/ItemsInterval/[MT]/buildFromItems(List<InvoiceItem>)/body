{
  final Set<UUID> repairedIds=new HashSet<UUID>();
  ListIterator<InvoiceItem> it=items.listIterator(items.size());
  while (it.hasPrevious()) {
    final InvoiceItem cur=it.previous();
switch (cur.getInvoiceItemType()) {
case FIXED:
case RECURRING:
      if (!repairedIds.contains(cur.getId())) {
        output.add(cur);
      }
    break;
case REPAIR_ADJ:
  repairedIds.add(cur.getLinkedItemId());
break;
case ITEM_ADJ:
break;
case EXTERNAL_CHARGE:
case CBA_ADJ:
case CREDIT_ADJ:
case REFUND_ADJ:
default :
}
}
}
