{
  final Subscription subscription=subscriptionsDao.getSubscriptionFromId(subscriptionId.toString(),context);
  if (subscription == null) {
    log.error(String.format(ErrorCode.ENT_INVALID_SUBSCRIPTION_ID.getFormat(),subscriptionId.toString()));
    return null;
  }
  final UUID bundleId=subscription.getBundleId();
  if (bundleId == null) {
    log.error(String.format(ErrorCode.ENT_GET_NO_BUNDLE_FOR_SUBSCRIPTION.getFormat(),subscriptionId.toString()));
    return null;
  }
  final SubscriptionBundle bundle=bundlesDao.getBundleFromId(bundleId.toString(),context);
  if (bundle == null) {
    log.error(String.format(ErrorCode.ENT_GET_INVALID_BUNDLE_ID.getFormat(),bundleId.toString()));
    return null;
  }
  return bundle.getAccountId();
}
