{
  final DateTime futureOrCurrentEndDateForSubscription=getSubscriptionBase().getEndDate() != null ? getSubscriptionBase().getEndDate() : getSubscriptionBase().getFutureEndDate();
  final DateTime futureOrCurrentEndDateForBaseSubscription=getEventsStream().getBaseSubscription().getEndDate() != null ? getEventsStream().getBaseSubscription().getEndDate() : getEventsStream().getBaseSubscription().getFutureEndDate();
  final DateTime futureOrCurrentEndDate;
  if (futureOrCurrentEndDateForBaseSubscription != null && futureOrCurrentEndDateForBaseSubscription.isBefore(futureOrCurrentEndDateForSubscription)) {
    futureOrCurrentEndDate=futureOrCurrentEndDateForBaseSubscription;
  }
 else {
    futureOrCurrentEndDate=futureOrCurrentEndDateForSubscription;
  }
  return futureOrCurrentEndDate != null ? new LocalDate(futureOrCurrentEndDate,getAccount().getTimeZone()) : null;
}
