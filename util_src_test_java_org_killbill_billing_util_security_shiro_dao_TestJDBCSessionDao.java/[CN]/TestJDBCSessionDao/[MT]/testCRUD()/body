{
  final JDBCSessionDao jdbcSessionDao=new JDBCSessionDao(dbi);
  final SimpleSession session=createSession();
  Assert.assertNull(jdbcSessionDao.doReadSession(session.getId()));
  final Serializable sessionId=jdbcSessionDao.doCreate(session);
  final Session retrievedSession=jdbcSessionDao.doReadSession(sessionId);
  Assert.assertEquals(retrievedSession,session);
  Date lastAccessTime=new Date(retrievedSession.getLastAccessTime().getTime() + 1000);
  Assert.assertNotEquals(retrievedSession.getLastAccessTime(),lastAccessTime);
  session.setLastAccessTime(lastAccessTime);
  jdbcSessionDao.doUpdate(session);
  Assert.assertEquals(jdbcSessionDao.doReadSession(sessionId).getLastAccessTime().compareTo(retrievedSession.getLastAccessTime()),0);
  lastAccessTime=new Date(retrievedSession.getLastAccessTime().getTime() + 100000);
  Assert.assertNotEquals(retrievedSession.getLastAccessTime(),lastAccessTime);
  session.setLastAccessTime(lastAccessTime);
  jdbcSessionDao.doUpdate(session);
  Assert.assertEquals(jdbcSessionDao.doReadSession(sessionId).getLastAccessTime().compareTo(lastAccessTime),0);
  jdbcSessionDao.doDelete(session);
  Assert.assertNull(jdbcSessionDao.doReadSession(session.getId()));
}
