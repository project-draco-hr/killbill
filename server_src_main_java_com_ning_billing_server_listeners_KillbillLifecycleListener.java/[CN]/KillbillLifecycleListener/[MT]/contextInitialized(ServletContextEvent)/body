{
  logger.info("KillbillLifecycleListener : contextInitialized");
  Injector injector=KillbillGuiceListener.getInjectorInstance();
  killbillLifecycle=injector.getInstance(DefaultLifecycle.class);
  killbillBusService=injector.getInstance(BusService.class);
  killbilleventHandler=new KillbillEventHandler();
  killbillLifecycle.fireStartupSequencePriorEventRegistration();
  try {
    killbillBusService.getBus().register(killbilleventHandler);
  }
 catch (  EventBusException e) {
    logger.error("Failed to register for event notifications, this is bad exiting!",e);
    System.exit(1);
  }
  killbillLifecycle.fireStartupSequencePostEventRegistration();
}
