{
  final List<Entitlement> result=new LinkedList<Entitlement>();
  final InternalTenantContext context=internalCallContextFactory.createInternalTenantContext(tenantContext);
  final List<SubscriptionBundle> bundles=subscriptionInternalApi.getBundlesForAccount(accountId,context);
  for (  final SubscriptionBundle bundle : bundles) {
    final List<Entitlement> entitlements=getAllEntitlementsFromBundleId(bundle.getId(),bundle.getAccountId(),context);
    result.addAll(entitlements);
  }
  return result;
}
