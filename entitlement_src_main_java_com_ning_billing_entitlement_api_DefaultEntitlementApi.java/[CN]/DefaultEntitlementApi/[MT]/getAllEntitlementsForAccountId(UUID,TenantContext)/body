{
  final InternalTenantContext context=internalCallContextFactory.createInternalTenantContext(accountId,tenantContext);
  final Account account;
  try {
    account=accountApi.getAccountById(accountId,context);
  }
 catch (  AccountApiException e) {
    throw new EntitlementApiException(e);
  }
  final List<SubscriptionBaseBundle> bundles=subscriptionInternalApi.getBundlesForAccount(account.getId(),context);
  return getEntitlementsForBundles(bundles,account,context);
}
