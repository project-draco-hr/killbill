{
  if (killbillAPI != null) {
    killbillAPI.close();
    killbillAPI=null;
  }
  if (dispatcher != null) {
    dispatcher.close();
    dispatcher=null;
  }
  if (dataSource != null) {
    dataSource.close();
    dataSource=null;
  }
  if (logService != null) {
    logService.close();
    logService=null;
  }
  try {
    final OSGIKillbillEventHandler handler=getOSGIKillbillEventHandler();
    if (handler != null && dispatcher != null) {
      dispatcher.unregisterEventHandler(handler);
      dispatcher=null;
    }
  }
 catch (  OSGIServiceNotAvailable ignore) {
  }
  if (registrar != null) {
    registrar.unregisterAll();
    registrar=null;
  }
}
