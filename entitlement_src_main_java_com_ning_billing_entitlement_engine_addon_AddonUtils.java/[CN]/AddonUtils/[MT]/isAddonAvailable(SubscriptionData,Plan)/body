{
  if (baseSubscription.getState() == SubscriptionState.CANCELLED) {
    return false;
  }
  Product targetAddonProduct=targetAddOnPlan.getProduct();
  Product baseProduct=baseSubscription.getCurrentPlan().getProduct();
  Product[] availableAddOns=baseProduct.getAvailable();
  for (  Product curAv : availableAddOns) {
    if (curAv.getName().equals(targetAddonProduct.getName())) {
      return true;
    }
  }
  return false;
}
