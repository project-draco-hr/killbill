{
  loadSystemPropertiesFromClasspath("/resource.properties");
  final MysqlTestingHelper mysqlTestingHelper=KillbillTestSuiteWithEmbeddedDB.getMysqlTestingHelper();
  dbi=mysqlTestingHelper.getDBI();
  clock=new ClockMock();
  bus=new InMemoryBus();
  bus.start();
  final NextBillingDatePoster nextBillingDatePoster=new MockNextBillingDatePoster();
  final TagDefinitionDao tagDefinitionDao=new MockTagDefinitionDao();
  final TagDao tagDao=new AuditedTagDao(dbi,tagEventBuilder,bus);
  final TagUserApi tagUserApi=new DefaultTagUserApi(new InternalCallContextFactory(dbi,clock),tagDefinitionDao,tagDao);
  invoiceDao=new AuditedInvoiceDao(dbi,nextBillingDatePoster,tagUserApi,clock,bus);
  invoiceDao.test(internalCallContext);
  invoiceItemSqlDao=dbi.onDemand(InvoiceItemSqlDao.class);
  invoicePaymentDao=dbi.onDemand(InvoicePaymentSqlDao.class);
  generator=new DefaultInvoiceGenerator(clock,invoiceConfig);
  assertTrue(true);
}
