{
  loadSystemPropertiesFromClasspath("/resource.properties");
  final MysqlTestingHelper mysqlTestingHelper=KillbillTestSuiteWithEmbeddedDB.getMysqlTestingHelper();
  dbi=mysqlTestingHelper.getDBI();
  clock=new ClockMock();
  bus=new InMemoryBus();
  bus.start();
  final NextBillingDatePoster nextBillingDatePoster=new MockNextBillingDatePoster();
  final TagDefinitionDao tagDefinitionDao=new MockTagDefinitionDao();
  final TagDao tagDao=new AuditedTagDao(dbi,tagEventBuilder,bus);
  final TagUserApi tagUserApi=new DefaultTagUserApi(tagDefinitionDao,tagDao);
  invoiceDao=new DefaultInvoiceDao(dbi,nextBillingDatePoster,tagUserApi);
  invoiceDao.test();
  invoiceItemSqlDao=dbi.onDemand(InvoiceItemSqlDao.class);
  invoicePaymentDao=dbi.onDemand(InvoicePaymentSqlDao.class);
  context=new TestCallContext("Invoice Dao Tests");
  generator=new DefaultInvoiceGenerator(clock,invoiceConfig);
  assertTrue(true);
}
