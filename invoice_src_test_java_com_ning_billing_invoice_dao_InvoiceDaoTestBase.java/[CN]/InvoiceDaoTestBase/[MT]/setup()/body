{
  try {
    InvoiceModuleMock module=new InvoiceModuleMock();
    final String ddl=IOUtils.toString(InvoiceDaoWrapper.class.getResourceAsStream("/com/ning/billing/invoice/ddl.sql"));
    module.createDb(ddl);
    final Injector injector=Guice.createInjector(Stage.DEVELOPMENT,module);
    invoiceDao=injector.getInstance(InvoiceDaoWrapper.class);
    invoiceDao.test();
    invoiceItemDao=injector.getInstance(InvoiceItemDao.class);
    invoiceItemDao.test();
    EventBusService busService=injector.getInstance(EventBusService.class);
    ((DefaultEventBusService)busService).startBus();
  }
 catch (  Throwable t) {
    fail(t.toString());
  }
}
