{
  final Throwable originalExceptionOrCause=MoreObjects.firstNonNull(e.getCause(),e);
  if (originalExceptionOrCause instanceof LockFailedException) {
    logger.warn("Failed to lock account {}",paymentStateContext.getAccount().getExternalKey());
  }
 else {
    logger.warn("Payment plugin call threw an exception for account {}",paymentStateContext.getAccount().getExternalKey(),originalExceptionOrCause);
  }
  return convertToUnknownTransactionStatusAndErroredPaymentState(originalExceptionOrCause);
}
