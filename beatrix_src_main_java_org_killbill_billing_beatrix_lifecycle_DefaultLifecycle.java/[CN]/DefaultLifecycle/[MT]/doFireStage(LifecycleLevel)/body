{
  log.info("Killbill lifecycle firing stage {}",level);
  final Set<LifecycleHandler<? extends KillbillService>> handlers=handlersByLevel.get(level);
  for (  final LifecycleHandler<? extends KillbillService> cur : handlers) {
    try {
      final Method method=cur.getMethod();
      final KillbillService target=cur.getTarget();
      log.info("Killbill lifecycle calling handler {} for service {}",cur.getMethod().getName(),target.getName());
      method.invoke(target);
    }
 catch (    final Exception e) {
      logWarn("Killbill lifecycle failed to invoke lifecycle handler",e);
    }
  }
}
