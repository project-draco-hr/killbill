{
  log.info("Killbill lifecycle firing stage {}",level);
  Set<LifecycleHandler<? extends IService>> handlers=handlersByLevel.get(level);
  for (  LifecycleHandler<? extends IService> cur : handlers) {
    try {
      Method method=cur.getMethod();
      IService target=cur.getTarget();
      log.debug("Killbill lifecycle calling handler {} for service {}",cur.getMethod().getName(),target.getName());
      method.invoke(target);
    }
 catch (    Exception e) {
      log.warn("Killbill lifecycle failed to invoke lifecycle handler",e);
    }
  }
}
