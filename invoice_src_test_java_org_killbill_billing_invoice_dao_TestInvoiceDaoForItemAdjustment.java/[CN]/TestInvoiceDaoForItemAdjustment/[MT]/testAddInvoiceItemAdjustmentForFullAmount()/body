{
  final Invoice invoice=new DefaultInvoice(UUID.randomUUID(),clock.getUTCToday(),clock.getUTCToday(),Currency.USD);
  final InvoiceItem invoiceItem=new RecurringInvoiceItem(invoice.getId(),invoice.getAccountId(),UUID.randomUUID(),UUID.randomUUID(),"test plan","test phase",new LocalDate(2010,1,1),new LocalDate(2010,4,1),INVOICE_ITEM_AMOUNT,new BigDecimal("7.00"),Currency.USD);
  invoice.addInvoiceItem(invoiceItem);
  invoiceUtil.createInvoice(invoice,true,internalCallContext);
  final InvoiceItemModelDao adjustedInvoiceItem=createAndCheckAdjustment(invoice,invoiceItem,null);
  Assert.assertEquals(adjustedInvoiceItem.getAmount().compareTo(invoiceItem.getAmount().negate()),0);
}
