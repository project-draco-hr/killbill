{
  final DateTime firstSampleTime=START_TIME.minusMinutes(startTimeMinutesAgo);
  final TimelineSourceEventAccumulator accumulator=new TimelineSourceEventAccumulator(timelineDao,timelineCoder,sampleCoder,hostId,EVENT_TYPE_ID,firstSampleTime,internalCallContextFactory);
  for (int i=0; i < 120; i++) {
    final DateTime eventDateTime=firstSampleTime.plusSeconds(i * 30);
    final Map<Integer,ScalarSample> event=createEvent(eventDateTime.getMillis());
    final SourceSamplesForTimestamp samples=new SourceSamplesForTimestamp(hostId,EVENT_TYPE,eventDateTime,event);
    accumulator.addSourceSamples(samples);
  }
  accumulator.extractAndQueueTimelineChunks();
}
