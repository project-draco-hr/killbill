{
  final InternalTenantContext internalTenantContext=context;
  final List<BusinessInvoiceModelDao> invoicesByKey=analyticsDao.getInvoicesByKey(accountKey,internalTenantContext);
  return ImmutableList.<BusinessInvoice>copyOf(Collections2.transform(invoicesByKey,new Function<BusinessInvoiceModelDao,BusinessInvoice>(){
    public BusinessInvoice apply(    @Nullable final BusinessInvoiceModelDao input){
      return new BusinessInvoice(input,input == null ? null : analyticsDao.getInvoiceItemsForInvoice(input.getInvoiceId().toString(),internalTenantContext));
    }
  }
));
}
