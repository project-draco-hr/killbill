{
  logDebug("ENTER doProcessEvents");
  final List<Notification> notifications=getReadyNotifications();
  if (notifications.size() == 0) {
    logDebug("EXIT doProcessEvents");
    return 0;
  }
  logDebug("START processing %d events at time %s",notifications.size(),clock.getUTCNow().toDate());
  int result=0;
  for (  final Notification cur : notifications) {
    nbProcessedEvents.incrementAndGet();
    logDebug("handling notification %s, key = %s for time %s",cur.getId(),cur.getNotificationKey(),cur.getEffectiveDate());
    handler.handleReadyNotification(cur.getNotificationKey(),cur.getEffectiveDate());
    result++;
    clearNotification(cur);
    logDebug("done handling notification %s, key = %s for time %s",cur.getId(),cur.getNotificationKey(),cur.getEffectiveDate());
  }
  return result;
}
