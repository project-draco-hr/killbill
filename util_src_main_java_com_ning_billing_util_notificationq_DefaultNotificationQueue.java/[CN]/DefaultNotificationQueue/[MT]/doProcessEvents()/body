{
  final InternalCallContext context=createCallContext();
  logDebug("ENTER doProcessEvents");
  final List<Notification> notifications=getReadyNotifications(context);
  if (notifications.size() == 0) {
    logDebug("EXIT doProcessEvents");
    return 0;
  }
  logDebug("START processing %d events at time %s",notifications.size(),getClock().getUTCNow().toDate());
  int result=0;
  for (  final Notification cur : notifications) {
    getNbProcessedEvents().incrementAndGet();
    logDebug("handling notification %s, key = %s for time %s",cur.getId(),cur.getNotificationKey(),cur.getEffectiveDate());
    final NotificationKey key=deserializeEvent(cur.getNotificationKeyClass(),cur.getNotificationKey());
    getHandler().handleReadyNotification(key,cur.getEffectiveDate());
    result++;
    clearNotification(cur,context);
    logDebug("done handling notification %s, key = %s for time %s",cur.getId(),cur.getNotificationKey(),cur.getEffectiveDate());
  }
  return result;
}
