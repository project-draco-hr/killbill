{
  MockCatalog cat=new MockCatalog();
  DefaultProduct product=cat.getProducts()[0];
  DefaultPriceList priceList=cat.getPriceListFromName(PriceListSet.DEFAULT_PRICELIST_NAME);
  CaseResult cr0=new CaseResult(product,ProductCategory.BASE,BillingPeriod.MONTHLY,priceList,Result.FOO);
  CaseResult cr1=new CaseResult(product,ProductCategory.BASE,BillingPeriod.MONTHLY,priceList,Result.BAR);
  CaseResult cr2=new CaseResult(product,ProductCategory.BASE,BillingPeriod.ANNUAL,priceList,Result.DIPSY);
  CaseResult cr3=new CaseResult(product,ProductCategory.BASE,BillingPeriod.ANNUAL,priceList,Result.LALA);
  Result r1=Case.getResult(new CaseResult[]{cr0,cr1,cr2,cr3},new PlanSpecifier(product.getName(),product.getCategory(),BillingPeriod.MONTHLY,priceList.getName()),cat);
  assertEquals(Result.FOO,r1);
  Result r2=Case.getResult(new CaseResult[]{cr0,cr1,cr2},new PlanSpecifier(product.getName(),product.getCategory(),BillingPeriod.ANNUAL,priceList.getName()),cat);
  assertEquals(Result.DIPSY,r2);
}
