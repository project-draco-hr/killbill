{
  final UUID thisBundleId=new UUID(0L,0L);
  now=new LocalDate();
  final List<Invoice> invoices=new ArrayList<Invoice>(5);
  Mockito.when(invoiceApi.getUnpaidInvoicesByAccountId(Mockito.<UUID>any(),Mockito.<LocalDate>any(),Mockito.<InternalTenantContext>any())).thenReturn(invoices);
  final SubscriptionBaseBundle bundle=Mockito.mock(SubscriptionBaseBundle.class);
  Mockito.when(bundle.getId()).thenReturn(thisBundleId);
  Mockito.when(bundle.getAccountId()).thenReturn(UUID.randomUUID());
  final SubscriptionBase subscription=Mockito.mock(SubscriptionBase.class);
  Mockito.when(subscriptionApi.getBaseSubscription(Mockito.<UUID>any(),Mockito.<InternalTenantContext>any())).thenReturn(subscription);
  final Plan plan=MockPlan.createBicycleNoTrialEvergreen1USD();
  final PriceList pricelist=new MockPriceList();
  Mockito.when(subscription.getCurrentPlan()).thenReturn(plan);
  Mockito.when(subscription.getCurrentPriceList()).thenReturn(pricelist);
  Mockito.when(subscription.getCurrentPhase()).thenReturn(plan.getFinalPhase());
}
