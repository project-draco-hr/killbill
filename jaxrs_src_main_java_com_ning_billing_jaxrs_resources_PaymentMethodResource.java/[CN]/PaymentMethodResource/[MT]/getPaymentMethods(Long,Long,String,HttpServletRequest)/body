{
  final TenantContext tenantContext=context.createContext(request);
  final Pagination<PaymentMethod> paymentMethods;
  final Map<String,String> nextUriParams=new HashMap<String,String>();
  if (Strings.isNullOrEmpty(pluginName)) {
    paymentMethods=paymentApi.getPaymentMethods(offset,limit,tenantContext);
  }
 else {
    paymentMethods=paymentApi.getPaymentMethods(offset,limit,pluginName,tenantContext);
    nextUriParams.put(QUERY_PAYMENT_METHOD_PLUGIN_NAME,pluginName);
  }
  final URI nextPageUri=uriBuilder.nextPage(PaymentMethodResource.class,"getPaymentMethods",paymentMethods.getNextOffset(),limit,nextUriParams);
  return buildStreamingPaymentMethodsResponse(paymentMethods,nextPageUri,tenantContext);
}
