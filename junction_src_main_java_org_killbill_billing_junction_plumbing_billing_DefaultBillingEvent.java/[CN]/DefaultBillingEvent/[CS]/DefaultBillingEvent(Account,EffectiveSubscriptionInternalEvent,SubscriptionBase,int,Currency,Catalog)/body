{
  this.account=account;
  this.billCycleDayLocal=billCycleDayLocal;
  this.subscription=subscription;
  effectiveDate=transition.getEffectiveTransitionTime();
  final String planPhaseName=(transition.getTransitionType() != SubscriptionBaseTransitionType.CANCEL) ? transition.getNextPhase() : transition.getPreviousPhase();
  planPhase=(planPhaseName != null) ? catalog.findPhase(planPhaseName,transition.getEffectiveTransitionTime(),transition.getSubscriptionStartDate()) : null;
  final String planName=(transition.getTransitionType() != SubscriptionBaseTransitionType.CANCEL) ? transition.getNextPlan() : transition.getPreviousPlan();
  plan=(planName != null) ? catalog.findPlan(planName,transition.getEffectiveTransitionTime(),transition.getSubscriptionStartDate()) : null;
  final String nextPhaseName=transition.getNextPhase();
  final PlanPhase nextPhase=(nextPhaseName != null) ? catalog.findPhase(nextPhaseName,transition.getEffectiveTransitionTime(),transition.getSubscriptionStartDate()) : null;
  final String prevPhaseName=transition.getPreviousPhase();
  final PlanPhase prevPhase=(prevPhaseName != null) ? catalog.findPhase(prevPhaseName,transition.getEffectiveTransitionTime(),transition.getSubscriptionStartDate()) : null;
  fixedPrice=(nextPhase != null && nextPhase.getFixedPrice() != null) ? nextPhase.getFixedPrice().getPrice(currency) : null;
  recurringPrice=(nextPhase != null && nextPhase.getRecurringPrice() != null) ? nextPhase.getRecurringPrice().getPrice(currency) : null;
  this.currency=currency;
  description=transition.getTransitionType().toString();
  billingModeType=BillingModeType.IN_ADVANCE;
  billingPeriod=(transition.getTransitionType() != SubscriptionBaseTransitionType.CANCEL) ? nextPhase.getBillingPeriod() : prevPhase.getBillingPeriod();
  type=transition.getTransitionType();
  totalOrdering=transition.getTotalOrdering();
  timeZone=account.getTimeZone();
}
