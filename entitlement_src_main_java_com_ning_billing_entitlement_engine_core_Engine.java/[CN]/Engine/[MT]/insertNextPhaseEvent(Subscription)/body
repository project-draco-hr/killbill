{
  DateTime now=clock.getUTCNow();
  EntitlementAlignment planPhaseAlignment=new EntitlementAlignment(subscription.getId(),now,subscription.getBundleStartDate(),subscription.getCurrentPlan(),subscription.getLatestTranstion().getTransitionTime(),subscription.getActiveVersion());
  IPhaseEvent nextPhaseEvent=planPhaseAlignment.getNextPhaseEvent();
  if (nextPhaseEvent != null) {
    dao.createNextPhaseEvent(subscription.getId(),nextPhaseEvent);
  }
}
