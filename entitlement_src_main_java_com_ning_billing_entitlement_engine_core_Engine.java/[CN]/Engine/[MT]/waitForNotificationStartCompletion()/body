{
  long ini=System.nanoTime();
synchronized (this) {
    do {
      if (startedNotificationThread) {
        break;
      }
      try {
        this.wait(NOTIFICATION_THREAD_WAIT_INCREMENT_MS);
      }
 catch (      InterruptedException e) {
        Thread.currentThread().interrupt();
        throw new EntitlementError(e);
      }
    }
 while (!startedNotificationThread && (System.nanoTime() - ini) / NANO_TO_MS < MAX_NOTIFICATION_THREAD_WAIT_MS);
    if (!startedNotificationThread) {
      log.error("Could not start notification thread in {} msec !!!",MAX_NOTIFICATION_THREAD_WAIT_MS);
      throw new EntitlementError("Failed to start service!!");
    }
    log.info("Notification thread has been started in {} ms",(System.nanoTime() - ini) / NANO_TO_MS);
  }
}
