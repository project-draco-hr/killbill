{
  long ini=System.nanoTime();
synchronized (this) {
    do {
      if ((startEvent ? startedNotificationThread : stoppedNotificationThread)) {
        break;
      }
      try {
        this.wait(NOTIFICATION_THREAD_WAIT_INCREMENT_MS);
      }
 catch (      InterruptedException e) {
        Thread.currentThread().interrupt();
        throw new EntitlementError(e);
      }
    }
 while (!(startEvent ? startedNotificationThread : stoppedNotificationThread) && (System.nanoTime() - ini) / NANO_TO_MS < MAX_NOTIFICATION_THREAD_WAIT_MS);
    if (!(startEvent ? startedNotificationThread : stoppedNotificationThread)) {
      log.error("Could not {} notification thread in {} msec !!!",(startEvent ? "start" : "stop"),MAX_NOTIFICATION_THREAD_WAIT_MS);
      throw new EntitlementError("Failed to start service!!");
    }
    log.info("Notification thread has been {} in {} ms",(startEvent ? "started" : "stopped"),(System.nanoTime() - ini) / NANO_TO_MS);
  }
}
