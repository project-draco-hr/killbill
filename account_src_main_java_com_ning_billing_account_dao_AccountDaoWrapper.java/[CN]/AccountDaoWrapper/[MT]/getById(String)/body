{
  return dbi.inTransaction(new TransactionCallback<Account>(){
    @Override public Account inTransaction(    Handle conn,    TransactionStatus status) throws Exception {
      try {
        conn.begin();
        Account account=accountDao.getById(id);
        if (account != null) {
          FieldStoreDao fieldStoreDao=conn.attach(FieldStoreDao.class);
          List<CustomField> fields=fieldStoreDao.load(account.getId().toString(),account.getObjectName());
          account.getFields().clear();
          if (fields != null) {
            for (            CustomField field : fields) {
              account.getFields().setValue(field.getName(),field.getValue());
            }
          }
          TagStoreDao tagStoreDao=conn.attach(TagStoreDao.class);
          List<Tag> tags=tagStoreDao.load(account.getId().toString(),account.getObjectName());
          account.clearTags();
          if (tags != null) {
            account.addTags(tags);
          }
        }
        return account;
      }
 catch (      Throwable t) {
        return null;
      }
    }
  }
);
}
