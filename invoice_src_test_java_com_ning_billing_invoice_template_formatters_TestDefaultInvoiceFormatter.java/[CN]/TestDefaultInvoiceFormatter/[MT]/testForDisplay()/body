{
  final FixedPriceInvoiceItem fixedItemBRL=new FixedPriceInvoiceItem(UUID.randomUUID(),UUID.randomUUID(),null,null,UUID.randomUUID().toString(),UUID.randomUUID().toString(),new LocalDate(),new BigDecimal("1499.95"),Currency.BRL);
  final Invoice invoice=new DefaultInvoice(UUID.randomUUID(),clock.getUTCNow(),UUID.randomUUID(),new Integer(234),new LocalDate(),new LocalDate(),Currency.BRL,Currency.BRL,false);
  invoice.addInvoiceItem(fixedItemBRL);
  final String template="<html>\n" + "    <head>\n" + "        <style type=\"text/css\">\n"+ "            #header td { width: 250px; }\n"+ "            #header .company_info { width: 450px; }\n"+ "            #header .label { text-align: right; font-weight: bold; }\n"+ "            #header .label_value { padding-left: 10px; }\n"+ "\n"+ "            #invoice_items { margin-top: 50px; }\n"+ "            #invoice_items th { border-bottom: solid 2px black; }\n"+ "            #invoice_items td { width: 250px; }\n"+ "            #invoice_items td.amount { width: 125px; }\n"+ "            #invoice_items td.network { width: 350px; }\n"+ "            #invoice_items .amount { text-align: right; }\n"+ "            #invoice_items .label { text-align: right; font-weight: bold; }\n"+ "        </style>\n"+ "    </head>\n"+ "    <body>\n"+ "        <table id=\"header\">\n"+ "            <tr>\n"+ "                <td class=\"company_info\"/>\n"+ "                <td />\n"+ "                <td><h1>{{text.invoiceTitle}}</h1></td>\n"+ "            </tr>\n"+ "            <tr>\n"+ "                <td colspan=\"3\"><img src=\"http://static.foo.com/www/0/main/gfx/front/logo.png\"/></td>\n"+ "            </tr>\n"+ "            <tr>\n"+ "                <td class=\"company_info\" />\n"+ "                <td class=\"label\">{{text.invoiceDate}}</td>\n"+ "                <td class=\"label_value\">{{invoice.formattedInvoiceDate}}</td>\n"+ "            </tr>\n"+ "            <tr>\n"+ "                <td class=\"company_info\" />\n"+ "                <td class=\"label\">{{text.invoiceNumber}}</td>\n"+ "                <td class=\"label_value\">{{invoice.invoiceNumber}}</td>\n"+ "            </tr>\n"+ "            <tr>\n"+ "                <td class=\"company_info\">{{text.companyCountry}}</td>\n"+ "                <td colspan=\"2\" />\n"+ "            </tr>\n"+ "            <tr>\n"+ "                <td class=\"company_info\">{{text.companyUrl}}</td>\n"+ "                <td colspan=\"2\" />\n"+ "            </tr>\n"+ "        </table>\n"+ "\n"+ "        <table id=\"invoice_items\">\n"+ "            <tr>\n"+ "                <th class=\"network\">{{text.invoiceItemBundleName}}</td>\n"+ "                <th>{{text.invoiceItemDescription}}</td>\n"+ "                <th>{{text.invoiceItemServicePeriod}}</td>\n"+ "                <th>{{text.invoiceItemAmount}}</td>\n"+ "            </tr>\n"+ "            {{#invoice.invoiceItems}}\n"+ "            <tr>\n"+ "                <td class=\"network\">{{description}}</td>\n"+ "                <td>{{planName}}</td>\n"+ "                <td>{{formattedStartDate}}{{#formattedEndDate}} - {{formattedEndDate}}{{/formattedEndDate}}</td>\n"+ "                <td class=\"amount\">{{formattedAmount}}</td>\n"+ "            </tr>\n"+ "            {{/invoice.invoiceItems}}\n"+ "            <tr>\n"+ "                <td colspan=\"4\" height=\"50px\"></td>\n"+ "            </tr>\n"+ "            <tr>\n"+ "                <td colspan=\"2\" />\n"+ "                <td class=\"label\">{{text.invoiceAmount}}</td>\n"+ "                <td class=\"amount\"><strong>{{invoice.formattedChargedAmount}}</strong></td>\n"+ "            </tr>\n"+ "            <tr>\n"+ "                <td colspan=\"2\" />\n"+ "                <td class=\"label\">{{text.invoiceAmountPaid}}"+ "                    {{#invoice.processedCurrency}}"+ " (*)"+ "                    {{/invoice.processedCurrency}}\n"+ "                </td>\n"+ "                <td class=\"amount\"><strong>{{invoice.formattedPaidAmount}}</strong></td>\n"+ "            </tr>\n"+ "            <tr>\n"+ "                <td colspan=\"2\" />\n"+ "                <td class=\"label\">{{text.invoiceBalance}}</td>\n"+ "                <td class=\"amount\"><strong>{{invoice.formattedBalance}}</strong></td>\n"+ "            </tr>\n"+ "        </table>\n"+ "        {{#invoice.processedCurrency}}"+ "        {{text.processedPaymentCurrency}} {{invoice.processedCurrency}}."+ "        {{#invoice.processedPaymentRate}}\n"+ " {{text.processedPaymentRate}} {{invoice.processedPaymentRate}}.\n"+ "        {{/invoice.processedPaymentRate}}"+ "        {{/invoice.processedCurrency}}"+ "    </body>\n"+ "</html>\n";
  final Map<String,Object> data=new HashMap<String,Object>();
  final DefaultInvoiceTranslator translator=new DefaultInvoiceTranslator(new TranslatorConfig(){
    @Override public String getDefaultLocale(){
      return "en_US";
    }
    @Override public String getCatalogBundlePath(){
      return null;
    }
    @Override public String getInvoiceTemplateBundlePath(){
      return "com/ning/billing/util/template/translation/InvoiceTranslation";
    }
    @Override public String getTemplateName(){
      return null;
    }
    @Override public String getManualPayTemplateName(){
      return null;
    }
    @Override public Class<? extends InvoiceFormatterFactory> getInvoiceFormatterFactoryClass(){
      return null;
    }
  }
);
  translator.setLocale(Locale.US);
  data.put("text",translator);
  data.put("invoice",new DefaultInvoiceFormatter(config,invoice,Locale.US,currencyConversionApi));
  final String formattedText=templateEngine.executeTemplateText(template,data);
  System.out.println(formattedText);
}
