{
  Invoice invoice=new DefaultInvoice(UUID.randomUUID(),account.getId(),new DateTime(),targetDate,currency);
  for (  InvoiceItem item : items) {
    invoice.addInvoiceItem(new DefaultInvoiceItem(invoice.getId(),item.getSubscriptionId(),item.getPlanName(),item.getPhaseName(),item.getStartDate(),item.getEndDate(),item.getRecurringAmount(),item.getRecurringRate(),item.getFixedAmount(),item.getCurrency()));
  }
  invoiceDao.create(invoice);
  return invoice;
}
