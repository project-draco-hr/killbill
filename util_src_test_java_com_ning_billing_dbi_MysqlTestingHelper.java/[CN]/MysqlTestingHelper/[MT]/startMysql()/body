{
  dbDir=File.createTempFile("mysql","");
  dbDir.delete();
  dbDir.mkdir();
  mysqldResource=new MysqldResource(dbDir);
  final Map<String,String> dbOpts=new HashMap<String,String>();
  dbOpts.put(MysqldResourceI.PORT,Integer.toString(port));
  dbOpts.put(MysqldResourceI.INITIALIZE_USER,"true");
  dbOpts.put(MysqldResourceI.INITIALIZE_USER_NAME,USERNAME);
  dbOpts.put("default-time-zone","+00:00");
  mysqldResource.start("test-mysqld-thread",dbOpts);
  if (!mysqldResource.isRunning()) {
    throw new IllegalStateException("MySQL did not start.");
  }
 else {
    log.info("MySQL running on port " + mysqldResource.getPort());
  }
}
