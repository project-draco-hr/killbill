{
  try {
    if (overdueStateSet == null) {
      return null;
    }
    OverdueState<T> nextOverdueState;
    BillingState<T> billingState=billingStateCalcuator.calculateBillingState(overdueable);
    String previousOverdueStateName=api.getBlockingStateFor(overdueable).getStateName();
    nextOverdueState=overdueStateSet.calculateOverdueState(billingState,clock.getUTCNow());
    if (!previousOverdueStateName.equals(nextOverdueState.getName())) {
      overdueStateApplicator.apply(overdueable,nextOverdueState,nextOverdueState);
    }
    return nextOverdueState;
  }
 catch (  EntitlementUserApiException e) {
    throw new OverdueError(e);
  }
}
