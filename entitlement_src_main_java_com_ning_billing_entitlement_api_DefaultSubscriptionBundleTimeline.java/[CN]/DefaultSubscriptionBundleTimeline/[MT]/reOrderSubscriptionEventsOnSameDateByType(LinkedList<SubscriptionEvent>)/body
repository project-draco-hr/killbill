{
  final LinkedList<SubscriptionEvent> result=new LinkedList<SubscriptionEvent>();
  for (  final SubscriptionEvent e : events) {
    final DefaultSubscriptionEvent cur=(DefaultSubscriptionEvent)e;
    final DefaultSubscriptionEvent prev=result.size() > 0 ? (DefaultSubscriptionEvent)result.getLast() : null;
    if (prev != null && prev.getEffectiveDateTime().compareTo(cur.getEffectiveDateTime()) == 0 && prev.getEntitlementId().equals(cur.getEntitlementId()) && prev.getSubscriptionEventType().ordinal() > cur.getSubscriptionEventType().ordinal()) {
      result.add(result.size() - 1,cur);
    }
 else {
      result.add(cur);
    }
  }
  return result;
}
