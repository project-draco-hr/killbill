{
  final Plan currentPlan=subscription.getCurrentPlan();
  final Product currentProduct=currentPlan.getProduct();
  final List<BusinessSubscriptionTransition> transitions=analyticsUserApi.getTransitionsForBundle(bundle.getKey());
  final BusinessSubscriptionTransition systemCancellation=transitions.get(3);
  Assert.assertEquals(systemCancellation.getExternalKey(),bundle.getKey());
  Assert.assertEquals(systemCancellation.getAccountKey(),account.getExternalKey());
  Assert.assertEquals(systemCancellation.getEvent().getCategory(),currentProduct.getCategory());
  Assert.assertEquals(systemCancellation.getEvent().getEventType(),BusinessSubscriptionEvent.EventType.SYSTEM_CANCEL);
  Assert.assertNull(systemCancellation.getNextSubscription());
  Assert.assertEquals(systemCancellation.getPreviousSubscription(),transitions.get(1).getNextSubscription());
}
