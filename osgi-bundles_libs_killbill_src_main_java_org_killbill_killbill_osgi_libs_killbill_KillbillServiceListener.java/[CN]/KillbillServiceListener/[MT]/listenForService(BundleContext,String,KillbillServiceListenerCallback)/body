{
  final String filter="(objectclass=" + serviceClass + ")";
  final KillbillServiceListener killbillServiceListener=new KillbillServiceListener(context,listenerCallback);
  context.addServiceListener(killbillServiceListener,filter);
  final ServiceReference[] serviceReferences=context.getServiceReferences((String)null,filter);
  for (int i=0; serviceReferences != null && i < serviceReferences.length; i++) {
    killbillServiceListener.serviceChanged(new ServiceEvent(ServiceEvent.REGISTERED,serviceReferences[i]));
  }
  return killbillServiceListener;
}
