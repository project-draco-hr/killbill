{
  final String chunkToString=mapper.writerWithView(Compact.class).writeValueAsString(chunk);
  final Map chunkFromString=mapper.readValue(chunkToString,Map.class);
  Assert.assertEquals(chunkFromString.keySet().size(),10);
  Assert.assertEquals(chunkFromString.get("sourceId"),HOST_ID);
  Assert.assertEquals(chunkFromString.get("metricId"),SAMPLE_KIND_ID);
  final Map<String,String> timeBytesAndSampleBytes=(Map<String,String>)chunkFromString.get("timeBytesAndSampleBytes");
  Assert.assertEquals(new TextNode(timeBytesAndSampleBytes.get("timeBytes")).binaryValue(),timeBytes);
  Assert.assertEquals(new TextNode(timeBytesAndSampleBytes.get("sampleBytes")).binaryValue(),samples);
  Assert.assertEquals(chunkFromString.get("sampleCount"),SAMPLE_COUNT);
  Assert.assertEquals(chunkFromString.get("aggregationLevel"),0);
  Assert.assertEquals(chunkFromString.get("notValid"),false);
  Assert.assertEquals(chunkFromString.get("dontAggregate"),false);
  Assert.assertEquals(chunkFromString.get("chunkId"),(int)CHUNK_ID);
}
