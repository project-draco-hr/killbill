{
  final Invoice invoice=new DefaultInvoice(UUID.randomUUID(),clock.getUTCToday(),clock.getUTCToday(),Currency.USD);
  final InvoiceItem invoiceItem=new RecurringInvoiceItem(invoice.getId(),invoice.getAccountId(),UUID.randomUUID(),UUID.randomUUID(),"test plan","test phase",new LocalDate(2010,1,1),new LocalDate(2010,4,1),INVOICE_ITEM_AMOUNT,new BigDecimal("7.00"),Currency.USD);
  invoice.addInvoiceItem(invoiceItem);
  invoiceDao.create(invoice,1,true,internalCallContext);
  final InvoiceItem adjustedInvoiceItem=createAndCheckAdjustment(invoice,invoiceItem,BigDecimal.TEN);
  Assert.assertEquals(adjustedInvoiceItem.getAmount().compareTo(BigDecimal.TEN.negate()),0);
}
