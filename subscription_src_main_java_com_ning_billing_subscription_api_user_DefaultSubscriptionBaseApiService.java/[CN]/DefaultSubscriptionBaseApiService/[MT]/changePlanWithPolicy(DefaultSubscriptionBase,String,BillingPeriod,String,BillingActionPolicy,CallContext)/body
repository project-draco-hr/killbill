{
  final DateTime now=clock.getUTCNow();
  final DateTime requestedDate=now;
  validateEntitlementState(subscription);
  final DateTime effectiveDate=subscription.getPlanChangeEffectiveDate(policy);
  try {
    return doChangePlan(subscription,productName,term,priceList,now,requestedDate,effectiveDate,context);
  }
 catch (  CatalogApiException e) {
    throw new SubscriptionBaseApiException(e);
  }
}
