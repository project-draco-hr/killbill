{
  final KillbillConfigSource configSource=new KillbillConfigSource(System.getProperties());
  configSource.setProperty(AnalyticsModule.ANALYTICS_DBI_CONFIG_STRING + "url",helper.getJdbcConnectionString());
  configSource.setProperty(AnalyticsModule.ANALYTICS_DBI_CONFIG_STRING + "user",DBTestingHelper.USERNAME);
  configSource.setProperty(AnalyticsModule.ANALYTICS_DBI_CONFIG_STRING + "password",DBTestingHelper.PASSWORD);
  install(new GuicyKillbillTestWithEmbeddedDBModule());
  install(new EmailModule(configSource));
  install(new CacheModule(configSource));
  install(new NonEntityDaoModule());
  install(new TestGlobalLockerModule(helper));
  install(new CustomFieldModule());
  install(new TagStoreModule());
  install(new AuditModule());
  install(new CatalogModule(configSource));
  install(new BusModule(configSource));
  install(new NotificationQueueModule(configSource));
  install(new CallContextModule());
  install(new DefaultAccountModule(configSource));
  install(new InvoiceModuleWithMockSender(configSource));
  install(new TemplateModule());
  install(new DefaultEntitlementModule(configSource));
  install(new AnalyticsModule(configSource));
  install(new PaymentMockModule(configSource));
  install(new BeatrixModule());
  install(new DefaultJunctionModule(configSource));
  install(new DefaultOverdueModule(configSource));
  install(new TenantModule(configSource));
  install(new ExportModule());
  install(new DefaultOSGIModule(configSource));
  install(new UsageModule(configSource));
  install(new RecordIdModule());
  installClock();
}
