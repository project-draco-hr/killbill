{
  final String invoicesURI=JaxrsResource.INVOICES_PATH;
  final Map<String,String> queryParams=new HashMap<String,String>();
  queryParams.put(JaxrsResource.QUERY_ACCOUNT_ID,accountId);
  queryParams.put(JaxrsResource.QUERY_INVOICE_WITH_ITEMS,"true");
  final Response invoicesResponse=doGet(invoicesURI,queryParams,DEFAULT_HTTP_TIMEOUT_SEC);
  assertEquals(invoicesResponse.getStatusCode(),Status.OK.getStatusCode());
  final String invoicesBaseJson=invoicesResponse.getResponseBody();
  final List<InvoiceJsonWithItems> invoices=mapper.readValue(invoicesBaseJson,new TypeReference<List<InvoiceJsonWithItems>>(){
  }
);
  assertNotNull(invoices);
  return invoices;
}
