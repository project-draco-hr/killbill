{
  final Account account=createAccountWithNonOsgiPaymentMethod(getAccountData(1));
  clock.setDay(new LocalDate(2012,4,1));
  final DefaultEntitlement bpEntitlement=createBaseEntitlementAndCheckForCompletion(account.getId(),"externalKey","Shotgun",ProductCategory.BASE,BillingPeriod.MONTHLY,NextEvent.CREATE,NextEvent.INVOICE);
  assertNotNull(bpEntitlement);
  invoiceChecker.checkInvoice(account.getId(),1,callContext,new ExpectedInvoiceItemCheck(new LocalDate(2012,4,1),null,InvoiceItemType.FIXED,new BigDecimal("0")));
  addDaysAndCheckForCompletion(33,NextEvent.PHASE,NextEvent.INVOICE,NextEvent.PAYMENT,NextEvent.INVOICE_PAYMENT);
  changeEntitlementAndCheckForCompletion(bpEntitlement,"Shotgun",BillingPeriod.ANNUAL,null,NextEvent.CHANGE,NextEvent.INVOICE);
}
