{
  final AccountJson input=createAccount(UUID.randomUUID().toString(),UUID.randomUUID().toString(),UUID.randomUUID().toString());
  final String accountId=input.getAccountId();
  final String email1=UUID.randomUUID().toString();
  final String email2=UUID.randomUUID().toString();
  final AccountEmailJson accountEmailJson1=new AccountEmailJson(accountId,email1);
  final AccountEmailJson accountEmailJson2=new AccountEmailJson(accountId,email2);
  final List<AccountEmailJson> firstEmails=getEmailsForAccount(accountId);
  Assert.assertEquals(firstEmails.size(),0);
  addEmailToAccount(accountId,accountEmailJson1);
  final List<AccountEmailJson> secondEmails=getEmailsForAccount(accountId);
  Assert.assertEquals(secondEmails.size(),1);
  Assert.assertEquals(secondEmails.get(0).getAccountId(),accountId);
  Assert.assertEquals(secondEmails.get(0).getEmail(),email1);
  addEmailToAccount(accountId,accountEmailJson2);
  final List<AccountEmailJson> thirdEmails=getEmailsForAccount(accountId);
  Assert.assertEquals(thirdEmails.size(),2);
  Assert.assertEquals(thirdEmails.get(0).getAccountId(),accountId);
  Assert.assertEquals(thirdEmails.get(1).getAccountId(),accountId);
  Assert.assertTrue(thirdEmails.get(0).getEmail().equals(email1) || thirdEmails.get(0).getEmail().equals(email2));
  Assert.assertTrue(thirdEmails.get(1).getEmail().equals(email1) || thirdEmails.get(1).getEmail().equals(email2));
  removeEmailFromAccount(accountId,email1);
  final List<AccountEmailJson> fourthEmails=getEmailsForAccount(accountId);
  Assert.assertEquals(fourthEmails.size(),1);
  Assert.assertEquals(fourthEmails.get(0).getAccountId(),accountId);
  Assert.assertEquals(fourthEmails.get(0).getEmail(),email2);
  addEmailToAccount(accountId,accountEmailJson2);
  Assert.assertEquals(getEmailsForAccount(accountId),fourthEmails);
}
