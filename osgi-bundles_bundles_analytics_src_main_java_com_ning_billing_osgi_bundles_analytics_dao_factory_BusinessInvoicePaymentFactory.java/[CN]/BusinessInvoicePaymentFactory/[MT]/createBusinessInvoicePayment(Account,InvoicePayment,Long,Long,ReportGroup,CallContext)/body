{
  final Long invoicePaymentRecordId=getInvoicePaymentRecordId(invoicePayment.getId(),context);
  final Payment payment=getPaymentWithPluginInfo(invoicePayment.getPaymentId(),context);
  Refund refund=null;
  if (invoicePayment.getPaymentCookieId() != null) {
    refund=getRefundWithPluginInfo(invoicePayment.getPaymentCookieId(),context);
  }
  final Invoice invoice=getInvoice(invoicePayment.getInvoiceId(),context);
  final PaymentMethod paymentMethod=getPaymentMethod(payment.getPaymentMethodId(),context);
  final AuditLog creationAuditLog=getInvoicePaymentCreationAuditLog(invoicePayment.getId(),context);
  return BusinessInvoicePaymentBaseModelDao.create(account,accountRecordId,invoice,invoicePayment,invoicePaymentRecordId,payment,refund,paymentMethod,creationAuditLog,tenantRecordId,reportGroup);
}
