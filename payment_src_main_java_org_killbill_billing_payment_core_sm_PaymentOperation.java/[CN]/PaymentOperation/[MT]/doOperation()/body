{
  try {
    if (paymentStateContext.getOverridePluginOperationResult() == null) {
      final PaymentTransactionInfoPlugin paymentInfoPlugin=doCallSpecificOperationCallback();
      sanityOnPaymentInfoPlugin(paymentInfoPlugin);
      paymentStateContext.setPaymentInfoPlugin(paymentInfoPlugin);
      return processPaymentInfoPlugin();
    }
 else {
      final PaymentTransactionInfoPlugin paymentInfoPlugin=new DefaultNoOpPaymentInfoPlugin(paymentStateContext.getPaymentId(),paymentStateContext.getTransactionId(),paymentStateContext.getTransactionType(),paymentStateContext.getPaymentTransactionModelDao().getProcessedAmount(),paymentStateContext.getPaymentTransactionModelDao().getProcessedCurrency(),paymentStateContext.getPaymentTransactionModelDao().getEffectiveDate(),paymentStateContext.getPaymentTransactionModelDao().getCreatedDate(),buildPaymentPluginStatusFromOperationResult(paymentStateContext.getOverridePluginOperationResult()),null);
      paymentStateContext.setPaymentInfoPlugin(paymentInfoPlugin);
      return paymentStateContext.getOverridePluginOperationResult();
    }
  }
 catch (  final PaymentPluginApiException e) {
    throw new PaymentApiException(ErrorCode.PAYMENT_PLUGIN_EXCEPTION,e.getErrorMessage());
  }
}
