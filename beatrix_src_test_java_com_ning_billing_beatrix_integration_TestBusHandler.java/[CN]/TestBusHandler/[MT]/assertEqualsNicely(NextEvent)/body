{
synchronized (this) {
    boolean foundIt=false;
    Iterator<NextEvent> it=nextExpectedEvent.iterator();
    while (it.hasNext()) {
      NextEvent ev=it.next();
      if (ev == received) {
        it.remove();
        foundIt=true;
        break;
      }
    }
    if (!foundIt) {
      Joiner joiner=Joiner.on(" ");
      log.error("TestBusHandler Received event " + received + "; expected "+ joiner.join(nextExpectedEvent));
      if (testFailure != null) {
        testFailure.failed("TestBusHandler Received event " + received + "; expected "+ joiner.join(nextExpectedEvent));
      }
    }
  }
}
