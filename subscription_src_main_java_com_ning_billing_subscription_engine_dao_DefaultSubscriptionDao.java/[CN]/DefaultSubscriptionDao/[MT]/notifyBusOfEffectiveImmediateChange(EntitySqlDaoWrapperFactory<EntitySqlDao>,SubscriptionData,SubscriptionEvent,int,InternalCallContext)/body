{
  try {
    final SubscriptionData upToDateSubscription=createSubscriptionWithNewEvent(subscription,immediateEvent);
    final SubscriptionBaseTransitionData transition=upToDateSubscription.getTransitionFromEvent(immediateEvent,seqId);
    final EffectiveSubscriptionInternalEvent busEvent=new DefaultEffectiveSubscriptionEvent(transition,upToDateSubscription.getAlignStartDate(),context.getUserToken(),context.getAccountRecordId(),context.getTenantRecordId());
    eventBus.postFromTransaction(busEvent,entitySqlDaoWrapperFactory.getSqlDao());
  }
 catch (  EventBusException e) {
    log.warn("Failed to post effective event for subscription " + subscription.getId(),e);
  }
}
