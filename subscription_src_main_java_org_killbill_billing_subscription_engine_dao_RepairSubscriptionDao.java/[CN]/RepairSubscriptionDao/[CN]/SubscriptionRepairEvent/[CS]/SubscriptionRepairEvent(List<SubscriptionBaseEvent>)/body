{
  this.events=new TreeSet<SubscriptionEventWithOrderingId>(new Comparator<SubscriptionEventWithOrderingId>(){
    @Override public int compare(    final SubscriptionEventWithOrderingId o1,    final SubscriptionEventWithOrderingId o2){
      if (o1 == o2) {
        return 0;
      }
      final int result=o1.getEvent().getEffectiveDate().compareTo(o2.getEvent().getEffectiveDate());
      if (result == 0) {
        if (o1.getOrderingId() < o2.getOrderingId()) {
          return -1;
        }
 else         if (o1.getOrderingId() > o2.getOrderingId()) {
          return 1;
        }
 else {
          throw new RuntimeException(String.format(" Repair subscription events should not have the same orderingId %s, %s ",o1,o2));
        }
      }
      return result;
    }
  }
);
  this.curOrderingId=0;
  if (initialEvents != null) {
    addEvents(initialEvents);
  }
}
