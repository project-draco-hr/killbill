{
  List<PaymentAttempt> attempts=getPaymentAttemptsForInvoiceIds(invoiceIds);
  List<PaymentInfoEvent> paymentsToReturn=new ArrayList<PaymentInfoEvent>(invoiceIds.size());
  for (  final PaymentAttempt attempt : attempts) {
    paymentsToReturn.addAll(Collections2.filter(payments.values(),new Predicate<PaymentInfoEvent>(){
      @Override public boolean apply(      PaymentInfoEvent input){
        return input.getId().equals(attempt.getPaymentId());
      }
    }
));
  }
  return paymentsToReturn;
}
