{
  final UUID invoiceId=UUID.randomUUID();
  final UUID paymentAttemptId=UUID.randomUUID();
  final UUID accountId=UUID.randomUUID();
  final UUID paymentId=UUID.randomUUID();
  final BigDecimal invoiceAmount=BigDecimal.TEN;
  ClockMock clock=new ClockMock();
  CallContext thisContext=new DefaultCallContext("Payment Tests",CallOrigin.TEST,UserType.TEST,clock);
  PaymentAttempt originalPaymentAttempt=new DefaultPaymentAttempt(paymentAttemptId,invoiceId,accountId,invoiceAmount,Currency.USD,clock.getUTCNow(),clock.getUTCNow(),paymentId,0,null,null,PaymentAttemptStatus.IN_PROCESSING);
  PaymentAttempt attempt=paymentDao.createPaymentAttempt(originalPaymentAttempt,PaymentAttemptStatus.IN_PROCESSING,thisContext);
  List<PaymentAttempt> attemptsFromGet=paymentDao.getPaymentAttemptsForInvoiceId(invoiceId);
  Assert.assertEquals(attempt,attemptsFromGet.get(0));
  PaymentAttempt attempt3=paymentDao.getPaymentAttemptsForInvoiceIds(Arrays.asList(invoiceId)).get(0);
  Assert.assertEquals(attempt,attempt3);
  PaymentAttempt attempt4=paymentDao.getPaymentAttemptById(attempt3.getId());
  Assert.assertEquals(attempt3,attempt4);
  PaymentInfoEvent originalPaymentInfo=new DefaultPaymentInfoEvent.Builder().setId(paymentId).setAmount(invoiceAmount).setStatus("Processed").setBankIdentificationNumber("1234").setPaymentNumber("12345").setPaymentMethodId("12345").setReferenceId("12345").setType("Electronic").setEffectiveDate(clock.getUTCNow()).build();
  paymentDao.savePaymentInfo(originalPaymentInfo,thisContext);
  PaymentInfoEvent paymentInfo=paymentDao.getPaymentInfoList(Arrays.asList(invoiceId)).get(0);
  Assert.assertEquals(paymentInfo,originalPaymentInfo);
  clock.setDeltaFromReality(60 * 60 * 1000);
  paymentDao.updatePaymentInfo(originalPaymentInfo.getPaymentMethod(),originalPaymentInfo.getId(),originalPaymentInfo.getCardType(),originalPaymentInfo.getCardCountry(),thisContext);
  paymentInfo=paymentDao.getPaymentInfoList(Arrays.asList(invoiceId)).get(0);
}
