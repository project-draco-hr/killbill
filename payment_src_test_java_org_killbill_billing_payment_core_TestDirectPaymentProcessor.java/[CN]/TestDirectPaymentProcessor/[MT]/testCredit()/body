{
  final String directPaymentExternalKey=UUID.randomUUID().toString();
  final String creditKey=UUID.randomUUID().toString();
  final DirectPayment purchase=directPaymentProcessor.createCredit(account,null,null,TEN,CURRENCY,directPaymentExternalKey,creditKey,SHOULD_LOCK_ACCOUNT,PLUGIN_PROPERTIES,callContext,internalCallContext);
  verifyDirectPayment(purchase,directPaymentExternalKey,ZERO,ZERO,ZERO,1);
  final UUID directPaymentId=purchase.getId();
  verifyDirectPaymentTransaction(purchase.getTransactions().get(0),creditKey,TransactionType.CREDIT,TEN,directPaymentId);
  paymentBusListener.verify(1,account.getId(),directPaymentId,TEN);
}
