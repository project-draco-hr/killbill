{
  final String directPaymentExternalKey=UUID.randomUUID().toString();
  final String purchaseKey=UUID.randomUUID().toString();
  final DirectPayment purchase=directPaymentProcessor.createPurchase(account,null,null,TEN,CURRENCY,directPaymentExternalKey,purchaseKey,SHOULD_LOCK_ACCOUNT,PLUGIN_PROPERTIES,callContext,internalCallContext);
  verifyDirectPayment(purchase,directPaymentExternalKey,ZERO,ZERO,ZERO,1);
  final UUID directPaymentId=purchase.getId();
  verifyDirectPaymentTransaction(purchase.getTransactions().get(0),purchaseKey,TransactionType.PURCHASE,TEN,directPaymentId);
  paymentBusListener.verify(1,account.getId(),directPaymentId,TEN);
}
