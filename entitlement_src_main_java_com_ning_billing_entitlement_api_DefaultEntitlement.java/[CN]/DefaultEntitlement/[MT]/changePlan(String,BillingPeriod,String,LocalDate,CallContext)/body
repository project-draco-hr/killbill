{
  final InternalCallContext context=internalCallContextFactory.createInternalCallContext(callContext);
  final DateTime requestedDate=fromLocalDateAndReferenceTime(localDate,subscription.getStartDate(),clock,context);
  try {
    checker.checkBlockedChange(subscription,context);
    return subscription.changePlan(productName,billingPeriod,priceList,requestedDate,callContext);
  }
 catch (  BlockingApiException e) {
    throw new EntitlementApiException(e,e.getCode(),e.getMessage());
  }
catch (  SubscriptionUserApiException e) {
    throw new EntitlementApiException(e);
  }
}
