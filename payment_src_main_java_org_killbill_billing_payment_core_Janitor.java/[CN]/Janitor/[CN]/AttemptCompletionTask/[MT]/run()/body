{
  if (isStopped) {
    shutdownLatch.countDown();
    return;
  }
  final List<PaymentAttemptModelDao> incompleteAttempts=paymentDao.getPaymentAttemptsByState(retrySMHelper.getInitialState().getName(),getCreatedDateBefore(),fakeCallContext);
  log.info("AttemptCompletionTask start run : found " + incompleteAttempts.size() + " incomplete attempts");
  for (  PaymentAttemptModelDao cur : incompleteAttempts) {
    if (isStopped) {
      shutdownLatch.countDown();
      return;
    }
    complete(cur);
  }
}
