{
  Payment payment=null;
  validateUniqueTransactionExternalKey(paymentTransactionExternalKey,internalCallContext);
  final UUID nonNullPaymentId=paymentAutomatonRunner.run(isApiPayment,transactionType,account,attemptId,paymentMethodId,paymentId,paymentExternalKey,paymentTransactionExternalKey,amount,currency,shouldLockAccountAndDispatch,properties,callContext,internalCallContext);
  payment=getPayment(nonNullPaymentId,true,properties,callContext,internalCallContext);
  return payment;
}
