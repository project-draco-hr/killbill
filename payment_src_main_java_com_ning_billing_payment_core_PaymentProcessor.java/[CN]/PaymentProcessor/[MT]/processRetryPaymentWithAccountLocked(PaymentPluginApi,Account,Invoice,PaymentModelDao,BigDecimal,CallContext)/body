{
  final boolean scheduleRetryForPayment=true;
  PaymentAttemptModelDao attempt=new PaymentAttemptModelDao(account.getId(),invoice.getId(),payment.getId(),clock.getUTCNow(),requestedAmount);
  paymentDao.insertNewAttemptForPayment(payment.getId(),attempt,scheduleRetryForPayment,context);
  return processPaymentWithAccountLocked(plugin,account,invoice,payment,attempt,false,context);
}
