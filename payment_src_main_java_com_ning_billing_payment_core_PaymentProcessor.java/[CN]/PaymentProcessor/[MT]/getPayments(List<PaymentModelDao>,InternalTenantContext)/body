{
  if (payments == null) {
    return Collections.emptyList();
  }
  final List<Payment> result=new LinkedList<Payment>();
  for (  final PaymentModelDao cur : payments) {
    final List<PaymentAttemptModelDao> attempts=paymentDao.getAttemptsForPayment(cur.getId(),context);
    final List<RefundModelDao> refunds=paymentDao.getRefundsForPayment(cur.getId(),context);
    final Payment entry=new DefaultPayment(cur,attempts,refunds);
    result.add(entry);
  }
  return result;
}
