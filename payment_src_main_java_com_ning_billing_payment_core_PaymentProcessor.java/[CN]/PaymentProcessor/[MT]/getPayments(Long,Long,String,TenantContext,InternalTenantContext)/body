{
  final PaymentPluginApi pluginApi=getPaymentPluginApi(pluginName);
  return getEntityPagination(limit,new SourcePaginationBuilder<PaymentModelDao,PaymentApiException>(){
    @Override public Pagination<PaymentModelDao> build(){
      return paymentDao.getPayments(pluginName,offset,limit,internalTenantContext);
    }
  }
,new Function<PaymentModelDao,Payment>(){
    @Override public Payment apply(    final PaymentModelDao paymentModelDao){
      PaymentInfoPlugin pluginInfo=null;
      try {
        pluginInfo=pluginApi.getPaymentInfo(paymentModelDao.getAccountId(),paymentModelDao.getId(),tenantContext);
      }
 catch (      final PaymentPluginApiException e) {
        log.warn("Unable to find payment id " + paymentModelDao.getId() + " in plugin "+ pluginName);
      }
      return fromPaymentModelDao(paymentModelDao,pluginInfo,internalTenantContext);
    }
  }
);
}
