{
  PaymentAttemptModelDao attempt=new PaymentAttemptModelDao(account.getId(),invoice.getId(),payment.getId(),clock.getUTCNow());
  paymentDao.insertNewAttemptForPayment(payment.getId(),attempt,context);
  return processPaymentWithAccountLocked(plugin,account,invoice,payment,attempt,context);
}
