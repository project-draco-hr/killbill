{
  map=new HashMap<String,RolledUpUsageForUnitTypes>();
  for (  RolledUpUsage ru : rolledUpUsages) {
    final LocalDate startRolledUpDate=new LocalDate(ru.getStartTime(),accountTimeZone);
    final LocalDate endRolledUpDate=new LocalDate(ru.getEndTime(),accountTimeZone);
    final String key=startRolledUpDate + "-" + endRolledUpDate;
    RolledUpUsageForUnitTypes usageForUnitTypes=map.get(key);
    if (usageForUnitTypes == null) {
      usageForUnitTypes=new RolledUpUsageForUnitTypes(startRolledUpDate,endRolledUpDate,unitTypes);
      map.put(key,usageForUnitTypes);
    }
    usageForUnitTypes.addUsageForUnit(ru.getUnitType(),ru.getAmount());
  }
}
