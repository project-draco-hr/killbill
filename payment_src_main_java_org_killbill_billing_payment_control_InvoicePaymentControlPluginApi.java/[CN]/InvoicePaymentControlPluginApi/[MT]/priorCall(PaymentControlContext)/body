{
  final TransactionType transactionType=paymentControlContext.getTransactionType();
  Preconditions.checkArgument(transactionType == TransactionType.PURCHASE || transactionType == TransactionType.REFUND);
  final InternalCallContext internalContext=internalCallContextFactory.createInternalCallContext(paymentControlContext.getAccountId(),paymentControlContext);
  if (transactionType == TransactionType.PURCHASE) {
    return getPluginPurchaseResult(paymentControlContext,internalContext);
  }
 else {
    return getPluginRefundResult(paymentControlContext,internalContext);
  }
}
