{
  Integer eventCategoryId=eventCategoriesCache.inverse().get(eventCategory);
  if (eventCategoryId == null) {
    eventCategoryId=delegate.getOrAddEventCategory(eventCategory,context);
synchronized (eventCategoriesCache) {
      if (eventCategoriesCache.get(eventCategoryId) == null) {
        eventCategoriesCache.put(eventCategoryId,eventCategory);
      }
    }
  }
  return eventCategoryId;
}
