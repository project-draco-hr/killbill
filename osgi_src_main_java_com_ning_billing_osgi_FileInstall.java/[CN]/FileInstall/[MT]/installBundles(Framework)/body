{
  final List<Bundle> installedBundles=new LinkedList<Bundle>();
  try {
    final BundleContext context=framework.getBundleContext();
    final String jrubyBundlePath=findJrubyBundlePath();
    installAllJavaBundles(context,installedBundles,jrubyBundlePath);
    installAllJavaPluginBundles(context,installedBundles);
    installAllJRubyPluginBundles(context,installedBundles,jrubyBundlePath);
  }
 catch (  PluginConfigException e) {
    logger.error("Error while parsing plugin configurations",e);
  }
catch (  BundleException e) {
    logger.error("Error while parsing plugin configurations",e);
  }
  return installedBundles;
}
