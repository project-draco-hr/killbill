{
  final CallContext callContext=context.createContext(createdBy,reason,comment,request);
  final SubscriptionCallCompletionCallback<Subscription> callback=new SubscriptionCallCompletionCallback<Subscription>(){
    @Override public Subscription doOperation(    final CallContext ctx) throws SubscriptionUserApiException, InterruptedException, TimeoutException {
      final DateTime inputDate=(requestedDate != null) ? DATE_TIME_FORMATTER.parseDateTime(requestedDate) : null;
      final UUID uuid=UUID.fromString(subscription.getBundleId());
      final PlanPhaseSpecifier spec=new PlanPhaseSpecifier(subscription.getProductName(),ProductCategory.valueOf(subscription.getProductCategory()),BillingPeriod.valueOf(subscription.getBillingPeriod()),subscription.getPriceList(),null);
      return entitlementApi.createSubscription(uuid,spec,inputDate,ctx);
    }
    @Override public boolean isImmOperation(){
      return true;
    }
    @Override public Response doResponseOk(    final Subscription createdSubscription){
      return uriBuilder.buildResponse(SubscriptionResource.class,"getSubscription",createdSubscription.getId());
    }
  }
;
  final SubscriptionCallCompletion<Subscription> callCompletionCreation=new SubscriptionCallCompletion<Subscription>();
  return callCompletionCreation.withSynchronization(callback,timeoutSec,callCompletion,callContext);
}
