{
  try {
    DateTime inputDate=(requestedDate != null) ? DATE_TIME_FORMATTER.parseDateTime(requestedDate) : null;
    UUID uuid=UUID.fromString(subscription.getBundleId());
    PlanPhaseSpecifier spec=new PlanPhaseSpecifier(subscription.getProductName(),ProductCategory.valueOf(subscription.getProductCategory()),BillingPeriod.valueOf(subscription.getBillingPeriod()),subscription.getPriceList(),null);
    Subscription created=entitlementApi.createSubscription(uuid,spec,inputDate,context.getContext());
    return uriBuilder.buildResponse(SubscriptionResource.class,"getSubscription",created.getId());
  }
 catch (  EntitlementUserApiException e) {
    log.info(String.format("Failed to create subscription %s",subscription),e);
    return Response.status(Status.BAD_REQUEST).build();
  }
}
