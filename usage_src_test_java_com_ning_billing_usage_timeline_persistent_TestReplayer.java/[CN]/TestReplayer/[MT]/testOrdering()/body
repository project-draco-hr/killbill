{
  Assert.assertTrue(basePath.mkdir());
  final List<String> filePathsCreated=new ArrayList<String>();
  final List<File> filesCreated=new ArrayList<File>();
  final int expected=50;
  for (int i=0; i < expected; i++) {
    filePathsCreated.add(outputStream.getFileName());
    Thread.sleep(17);
  }
  for (int i=expected - 1; i >= 0; i--) {
    final File file=new File(filePathsCreated.get(i));
    Assert.assertTrue(file.createNewFile());
    filesCreated.add(file);
  }
  final MockReplayer replayer=new MockReplayer(basePath.toString(),Lists.reverse(filesCreated));
  replayer.readAll();
  Assert.assertEquals(replayer.getSeen(),expected);
}
