{
  final UUID paymentAttemptId;
  try {
    paymentAttemptId=paymentApi.getPaymentAttemptIdFromPaymentId(UUID.fromString(paymentId));
  }
 catch (  PaymentApiException e) {
    final String error=String.format("Failed to locate payment attempt for payment id %s",paymentId);
    log.info(error,e);
    return Response.status(Response.Status.NO_CONTENT).build();
  }
  final List<InvoicePayment> chargebacks=invoicePaymentApi.getChargebacksByPaymentAttemptId(paymentAttemptId);
  final List<ChargebackJson> chargebacksJson=convertToJson(chargebacks);
  try {
    final String accountId=invoicePaymentApi.getAccountIdFromInvoicePaymentId(UUID.fromString(paymentId)).toString();
    final ChargebackCollectionJson json=new ChargebackCollectionJson(accountId,chargebacksJson);
    return Response.status(Response.Status.OK).entity(json).build();
  }
 catch (  InvoiceApiException e) {
    final String error=String.format("Failed to locate account for payment id %s",paymentId);
    log.info(error,e);
    return Response.status(Response.Status.NO_CONTENT).build();
  }
}
