{
  try {
    final Factory<SecurityManager> factory=new IniSecurityManagerFactory(securityConfig.getShiroResourcePath());
    final DefaultSecurityManager securityManager=(DefaultSecurityManager)factory.getInstance();
    final Collection<Realm> realms=securityManager.getRealms();
    return realms == null ? new IniRealm(securityConfig.getShiroResourcePath()) : realms.iterator().next();
  }
 catch (  final ConfigurationException e) {
    log.warn("Unable to configure RBAC",e);
    return new IniRealm();
  }
}
