{
  final DefaultSubscriptionBase subscription=new DefaultSubscriptionBase(new SubscriptionBuilder(in),null,clock);
  if (events.size() > 0) {
    try {
      subscription.rebuildTransitions(getEventsForSubscription(in.getId(),context),catalogService.getFullCatalog(context));
    }
 catch (    CatalogApiException e) {
      e.printStackTrace();
    }
  }
  return subscription;
}
