{
  final UUID nonNullDirectPaymentId=directPaymentAutomatonRunner.run(TransactionType.CREDIT,account,paymentMethodId,directPaymentId,directPaymentExternalKey,directPaymentTransactionExternalKey,amount,currency,shouldLockAccountAndDispatch,properties,callContext,internalCallContext);
  final DirectPayment directPayment=getPayment(nonNullDirectPaymentId,true,properties,callContext,internalCallContext);
  postPaymentEvent(account,directPayment,directPaymentTransactionExternalKey,internalCallContext);
  return directPayment;
}
