{
  final DateTime initialNow=new DateTime(2013,8,22,22,07,01,0,DateTimeZone.UTC);
  clock.setTime(initialNow);
  final LocalDate inputDate=new LocalDate(2013,8,22);
  final DateTimeZone timeZoneUtcMinus8=DateTimeZone.forOffsetHours(-8);
  Mockito.when(account.getTimeZone()).thenReturn(timeZoneUtcMinus8);
  internalCallContext.setReferenceDateTimeZone(account.getTimeZone());
  final DateTime referenceDateTimeThatDoesNotMatter=new DateTime();
  final DateTime targetDate=dateHelper.fromLocalDateAndReferenceTime(inputDate,referenceDateTimeThatDoesNotMatter,internalCallContext);
  final DateTime now=clock.getUTCNow();
  Assert.assertTrue(initialNow.compareTo(targetDate) <= 0);
  Assert.assertTrue(targetDate.compareTo(now) <= 0);
}
