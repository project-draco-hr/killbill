{
  final List<Integer> metricIds=new ArrayList<Integer>(metricsPerCategory.keySet().size());
  for (  final String category : metricsPerCategory.keySet()) {
    final Integer categoryId=timelineDao.getEventCategoryId(category,context);
    if (categoryId == null) {
      continue;
    }
    for (    final String metricName : metricsPerCategory.get(category)) {
      final Integer sampleKindId=timelineDao.getMetricId(categoryId,metricName,context);
      if (sampleKindId == null) {
        continue;
      }
      metricIds.add(sampleKindId);
    }
  }
  return metricIds;
}
