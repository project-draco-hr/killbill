{
  try {
    SubscriptionJson obj=buildSubscriptionReadEventJson();
    ObjectWriter objWriter=objectMapper.writerWithView(viewClass);
    Writer writer=new StringWriter();
    objWriter.writeValue(writer,obj);
    String baseJson=writer.toString();
    log.info(baseJson);
    SubscriptionJson objFromJson=objectMapper.readValue(baseJson,SubscriptionJson.class);
    log.info(objFromJson.toString());
    if (viewClass.equals(BundleTimelineViews.Base.class)) {
      Assert.assertNull(objFromJson.getEvents());
    }
 else {
      Assert.assertNotNull(objFromJson.getEvents());
    }
    writer=new StringWriter();
    objWriter.writeValue(writer,objFromJson);
    String newBaseJson=writer.toString();
    Assert.assertEquals(newBaseJson,baseJson);
  }
 catch (  Exception e) {
    Assert.fail(e.getMessage());
  }
}
