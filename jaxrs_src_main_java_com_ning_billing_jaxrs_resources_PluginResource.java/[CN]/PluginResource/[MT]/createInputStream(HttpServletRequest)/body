{
  final ByteArrayOutputStream out=new ByteArrayOutputStream();
  for (  final String key : request.getParameterMap().keySet()) {
    out.write((key + "=").getBytes(UTF_8));
    int idx=0;
    for (    final String value : request.getParameterMap().get(key)) {
      if (idx > 0) {
        out.write("&".getBytes(UTF_8));
      }
      idx++;
      out.write(value.getBytes(UTF_8));
    }
  }
  ByteStreams.copy(request.getInputStream(),out);
  return new ByteArrayInputStream(out.toByteArray());
}
