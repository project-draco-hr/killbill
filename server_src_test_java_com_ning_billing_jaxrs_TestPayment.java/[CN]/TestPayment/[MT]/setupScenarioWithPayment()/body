{
  final AccountJson accountJson=createAccountWithPMBundleAndSubscriptionAndWaitForFirstInvoice();
  final List<PaymentJsonSimple> firstPaymentForAccount=getPaymentsForAccount(accountJson.getAccountId());
  Assert.assertEquals(firstPaymentForAccount.size(),1);
  final PaymentJsonSimple paymentJsonSimple=firstPaymentForAccount.get(0);
  final String paymentMethodId=paymentJsonSimple.getPaymentMethodId();
  final PaymentMethodJson paymentMethodJson=getPaymentMethodWithPluginInfo(paymentMethodId);
  Assert.assertEquals(paymentMethodJson.getPaymentMethodId(),paymentMethodId);
  Assert.assertEquals(paymentMethodJson.getAccountId(),accountJson.getAccountId());
  Assert.assertNotNull(paymentMethodJson.getPluginInfo().getExternalPaymentId());
  final List<RefundJson> objRefundFromJson=getRefundsForPayment(paymentJsonSimple.getPaymentId());
  Assert.assertEquals(objRefundFromJson.size(),0);
  return paymentJsonSimple;
}
