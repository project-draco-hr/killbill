{
  helper.startMysql();
  helper.initDb();
  final IProduct product=new MockProduct("platinium","subscription",ProductCategory.BASE);
  final IPlan plan=new MockPlan("platinum-monthly",product);
  final IPlanPhase phase=new MockPhase(PhaseType.EVERGREEN,plan,MockDuration.UNLIMITED(),25.95);
  final ISubscription prevISubscription=new MockSubscription(ISubscription.SubscriptionState.ACTIVE,plan,phase);
  final ISubscription nextISubscription=new MockSubscription(ISubscription.SubscriptionState.CANCELLED,plan,phase);
  final BusinessSubscription prevSubscription=new BusinessSubscription(prevISubscription);
  final BusinessSubscription nextSubscription=new BusinessSubscription(nextISubscription);
  final BusinessSubscriptionEvent event=BusinessSubscriptionEvent.subscriptionCancelled(prevISubscription);
  final DateTime requestedTimestamp=new DateTime(DateTimeZone.UTC);
  transition=new BusinessSubscriptionTransition(KEY,requestedTimestamp,event,prevSubscription,nextSubscription);
  final IDBI dbi=helper.getDBI();
  dao=dbi.onDemand(EventDao.class);
  try {
    dao.test();
  }
 catch (  Throwable t) {
    Assert.fail(t.toString());
  }
}
