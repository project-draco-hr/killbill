{
  SubscriptionData subscription=new SubscriptionDataRepair(builder,apiService,clock,addonUtils);
  if (events.size() > 0) {
    for (    EntitlementEvent cur : events) {
      cur.setActiveVersion(builder.getActiveVersion());
    }
    subscription.rebuildTransitions(events,catalogService.getFullCatalog());
  }
  return subscription;
}
