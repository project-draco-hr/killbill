{
  JAXBContext context=JAXBContext.newInstance(Catalog.class);
  InputStream resourceStream=XMLReader.class.getResourceAsStream("/CatalogSchema.xsd");
  SchemaFactory factory=SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
  Unmarshaller um=context.createUnmarshaller();
  if (resourceStream == null) {
    log.error("Can't find XML Schema resource to validate content - if you are seeing " + "this as part of the release build process its OK to ignore, otherwie it needs attention");
  }
 else {
    Schema schema=factory.newSchema(new StreamSource(resourceStream));
    um.setSchema(schema);
  }
  Object o=um.unmarshal(url);
  if (o instanceof Catalog) {
    Catalog c=(Catalog)o;
    c.setCatalogURL(url);
    c.initialize(c);
    ValidationErrors errs=c.validate();
    System.out.println("Errors: " + errs.size() + " for "+ url);
    return (Catalog)o;
  }
 else {
    return null;
  }
}
