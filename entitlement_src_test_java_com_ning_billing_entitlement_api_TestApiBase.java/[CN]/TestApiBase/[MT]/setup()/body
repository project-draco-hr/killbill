{
  loadSystemPropertiesFromClasspath("/entitlement.properties");
  final Injector g=getInjector();
  entitlementService=g.getInstance(EntitlementService.class);
  EntitlementUserApi entApi=(EntitlementUserApi)g.getInstance(Key.get(EntitlementUserApi.class,RealImplementation.class));
  entitlementApi=entApi;
  billingApi=g.getInstance(ChargeThruApi.class);
  migrationApi=g.getInstance(EntitlementMigrationApi.class);
  repairApi=g.getInstance(EntitlementTimelineApi.class);
  catalogService=g.getInstance(CatalogService.class);
  busService=g.getInstance(BusService.class);
  config=g.getInstance(EntitlementConfig.class);
  dao=g.getInstance(EntitlementDao.class);
  clock=(ClockMock)g.getInstance(Clock.class);
  helper=(isSqlTest(dao)) ? g.getInstance(MysqlTestingHelper.class) : null;
  ((DefaultCatalogService)catalogService).loadCatalog();
  ((Engine)entitlementService).initialize();
  init(g);
  ((DefaultBusService)busService).startBus();
}
