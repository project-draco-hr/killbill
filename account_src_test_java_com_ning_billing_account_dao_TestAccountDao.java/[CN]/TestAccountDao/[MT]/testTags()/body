{
  Account account=createTestAccount(1);
  TagDefinition definition=new DefaultTagDefinition("Test Tag","For testing only",false);
  TagDefinitionSqlDao tagDescriptionDao=dbi.onDemand(TagDefinitionSqlDao.class);
  tagDescriptionDao.create(definition,context);
  TagDao tagDao=new AuditedTagDao(dbi,tagEventBuilder,bus);
  tagDao.insertTag(account.getId(),ObjectType.ACCOUNT,definition,context);
  Map<String,Tag> tagMap=tagDao.loadEntities(account.getId(),ObjectType.ACCOUNT);
  assertEquals(tagMap.size(),1);
  Tag tag=tagMap.get(definition.getName());
  assertEquals(tag.getTagDefinitionName(),definition.getName());
}
