{
  final Account account=createTestAccount(1);
  final TagDefinition definition=new DefaultTagDefinition("Test Tag","For testing only",false);
  final TagDefinitionSqlDao tagDescriptionDao=dbi.onDemand(TagDefinitionSqlDao.class);
  tagDescriptionDao.create(definition,internalCallContext);
  final TagDao tagDao=new AuditedTagDao(dbi,tagEventBuilder,bus,new DefaultClock());
  tagDao.insertTag(account.getId(),ObjectType.ACCOUNT,definition.getId(),internalCallContext);
  final Map<String,Tag> tagMap=tagDao.getTags(account.getId(),ObjectType.ACCOUNT,internalCallContext);
  assertEquals(tagMap.size(),1);
  assertEquals(tagMap.values().iterator().next().getTagDefinitionId(),definition.getId());
}
