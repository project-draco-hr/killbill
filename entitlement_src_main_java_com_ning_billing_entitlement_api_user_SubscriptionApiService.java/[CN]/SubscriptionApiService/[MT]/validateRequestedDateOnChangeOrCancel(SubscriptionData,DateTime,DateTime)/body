{
  if (requestedDate.isAfter(now)) {
    throw new EntitlementUserApiException(ErrorCode.ENT_INVALID_REQUESTED_FUTURE_DATE,requestedDate.toString());
  }
  SubscriptionTransition previousTransition=subscription.getPreviousTransition();
  if (previousTransition.getEffectiveTransitionTime().isAfter(requestedDate)) {
    throw new EntitlementUserApiException(ErrorCode.ENT_INVALID_REQUESTED_DATE,requestedDate.toString(),previousTransition.getEffectiveTransitionTime());
  }
}
