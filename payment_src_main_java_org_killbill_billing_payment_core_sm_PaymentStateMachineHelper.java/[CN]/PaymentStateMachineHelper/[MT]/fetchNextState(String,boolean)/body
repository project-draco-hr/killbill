{
  final StateMachine stateMachine=getStateMachineForStateName(prevStateName);
  final Transition transition=Iterables.tryFind(ImmutableList.copyOf(stateMachine.getTransitions()),new Predicate<Transition>(){
    @Override public boolean apply(    final Transition input){
      return input.getInitialState().getName().equals(prevStateName) && input.getOperationResult().equals(isSuccess ? OperationResult.SUCCESS : OperationResult.FAILURE);
    }
  }
).orNull();
  return transition != null ? transition.getFinalState() : null;
}
