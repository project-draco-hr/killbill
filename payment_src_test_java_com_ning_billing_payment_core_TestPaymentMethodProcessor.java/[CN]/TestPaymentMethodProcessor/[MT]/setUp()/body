{
  final DefaultPaymentProviderPluginRegistry pluginRegistry=new DefaultPaymentProviderPluginRegistry(Mockito.mock(PaymentConfig.class));
  pluginRegistry.register(new ExternalPaymentProviderPlugin(new ClockMock()),ExternalPaymentProviderPlugin.PLUGIN_NAME);
  final AccountUserApi accountUserApi=Mockito.mock(AccountUserApi.class);
  final Bus bus=Mockito.mock(Bus.class);
  final MockPaymentDao paymentDao=new MockPaymentDao();
  final GlobalLocker globalLocker=Mockito.mock(GlobalLocker.class);
  final ExecutorService executorService=Mockito.mock(ExecutorService.class);
  final TagUserApi tagUserApi=Mockito.mock(TagUserApi.class);
  processor=new PaymentMethodProcessor(pluginRegistry,accountUserApi,bus,paymentDao,tagUserApi,globalLocker,executorService);
}
