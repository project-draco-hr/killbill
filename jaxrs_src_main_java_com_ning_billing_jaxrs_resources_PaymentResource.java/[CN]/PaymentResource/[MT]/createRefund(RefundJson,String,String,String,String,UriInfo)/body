{
  final UUID paymentUuid=UUID.fromString(paymentId);
  final Payment payment=paymentApi.getPayment(paymentUuid);
  final Account account=accountApi.getAccountById(payment.getAccountId());
  final Refund result;
  if (json.isAdjusted()) {
    result=paymentApi.createRefundWithAdjustment(account,paymentUuid,json.getRefundAmount(),context.createContext(createdBy,reason,comment));
  }
 else {
    result=paymentApi.createRefund(account,paymentUuid,json.getRefundAmount(),context.createContext(createdBy,reason,comment));
  }
  return uriBuilder.buildResponse(RefundResource.class,"getRefund",result.getId(),uriInfo.getBaseUri().toString());
}
