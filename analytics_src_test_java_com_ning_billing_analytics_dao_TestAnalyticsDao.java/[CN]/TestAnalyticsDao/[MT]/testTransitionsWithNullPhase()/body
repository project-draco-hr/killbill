{
  final BusinessSubscription subscriptionWithNullPhase=new BusinessSubscription(null,plan.getName(),null,Currency.USD,null,null,null,null,catalog);
  final BusinessSubscriptionTransition transitionWithNullPhase=new BusinessSubscriptionTransition(transition.getId(),transition.getKey(),transition.getAccountKey(),transition.getRequestedTimestamp(),transition.getEvent(),subscriptionWithNullPhase,subscriptionWithNullPhase);
  businessSubscriptionTransitionDao.createTransition(transitionWithNullPhase);
  final List<BusinessSubscriptionTransition> transitions=businessSubscriptionTransitionDao.getTransitions(EVENT_KEY);
  Assert.assertEquals(transitions.size(),1);
  Assert.assertEquals(transitions.get(0).getKey(),transition.getKey());
  Assert.assertEquals(transitions.get(0).getRequestedTimestamp(),transition.getRequestedTimestamp());
  Assert.assertEquals(transitions.get(0).getEvent(),transition.getEvent());
  final BusinessSubscription blankSubscription=new BusinessSubscription(null,plan.getName(),new MockPhase(null,null,null,0.0).getName(),Currency.USD,null,null,null,null,catalog);
  Assert.assertEquals(transitions.get(0).getPreviousSubscription(),blankSubscription);
  Assert.assertEquals(transitions.get(0).getNextSubscription(),blankSubscription);
}
