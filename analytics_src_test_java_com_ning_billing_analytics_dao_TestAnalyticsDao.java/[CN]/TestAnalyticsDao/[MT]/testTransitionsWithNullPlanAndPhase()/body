{
  final BusinessSubscription subscriptionWithNullPlanAndPhase=new BusinessSubscription(null,null,null,Currency.USD,null,null,catalog);
  final BusinessSubscriptionTransition transitionWithNullPlanAndPhase=new BusinessSubscriptionTransition(transition.getTotalOrdering(),transition.getBundleId(),transition.getExternalKey(),transition.getAccountId(),transition.getAccountKey(),transition.getSubscriptionId(),transition.getRequestedTimestamp(),transition.getEvent(),subscriptionWithNullPlanAndPhase,subscriptionWithNullPlanAndPhase);
  businessSubscriptionTransitionSqlDao.createTransition(transitionWithNullPlanAndPhase);
  final List<BusinessSubscriptionTransition> transitions=businessSubscriptionTransitionSqlDao.getTransitionsByKey(EXTERNAL_KEY);
  Assert.assertEquals(transitions.size(),1);
  Assert.assertEquals(transitions.get(0).getExternalKey(),transition.getExternalKey());
  Assert.assertEquals(transitions.get(0).getRequestedTimestamp(),transition.getRequestedTimestamp());
  Assert.assertEquals(transitions.get(0).getEvent(),transition.getEvent());
  Assert.assertNull(transitions.get(0).getPreviousSubscription());
  Assert.assertNull(transitions.get(0).getNextSubscription());
}
