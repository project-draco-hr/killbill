{
synchronized (events) {
    undoMigration(accountId);
    for (    final BundleMigrationData curBundle : accountData.getData()) {
      SubscriptionBundleData bundleData=curBundle.getData();
      for (      final SubscriptionMigrationData curSubscription : curBundle.getSubscriptions()) {
        SubscriptionData subData=curSubscription.getData();
        for (        final EntitlementEvent curEvent : curSubscription.getInitialEvents()) {
          events.add(curEvent);
          recordFutureNotificationFromTransaction(null,curEvent.getEffectiveDate(),new NotificationKey(){
            @Override public String toString(){
              return curEvent.getId().toString();
            }
          }
);
        }
        subscriptions.add(subData);
      }
      bundles.add(bundleData);
    }
  }
}
