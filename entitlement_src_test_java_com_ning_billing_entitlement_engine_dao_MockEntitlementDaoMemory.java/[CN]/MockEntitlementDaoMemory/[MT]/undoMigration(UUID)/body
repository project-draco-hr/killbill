{
synchronized (events) {
    List<SubscriptionBundle> allBundles=getSubscriptionBundleForAccount(accountId);
    for (    final SubscriptionBundle bundle : allBundles) {
      List<Subscription> allSubscriptions=getSubscriptions(null,bundle.getId());
      for (      final Subscription subscription : allSubscriptions) {
        List<EntitlementEvent> allEvents=getEventsForSubscription(subscription.getId());
        for (        final EntitlementEvent event : allEvents) {
          events.remove(event);
        }
        subscriptions.remove(subscription);
      }
      bundles.remove(bundle);
    }
  }
}
