{
  final InternalTenantContext internalTenantContext=createTenantContextFromBundleId(bundleId,context);
  final TimedPhase[] curAndNextPhases=planAligner.getCurrentAndNextTimedPhaseOnCreate(alignStartDate,bundleStartDate,plan,initialPhase,realPriceList,requestedDate,effectiveDate,internalTenantContext);
  final ApiEventBuilder createBuilder=new ApiEventBuilder().setSubscriptionId(subscriptionId).setEventPlan(plan.getName()).setEventPlanPhase(curAndNextPhases[0].getPhase().getName()).setEventPriceList(realPriceList).setActiveVersion(activeVersion).setProcessedDate(processedDate).setEffectiveDate(effectiveDate).setRequestedDate(requestedDate).setFromDisk(true);
  final ApiEvent creationEvent=(reCreate) ? new ApiEventReCreate(createBuilder) : new ApiEventCreate(createBuilder);
  final TimedPhase nextTimedPhase=curAndNextPhases[1];
  final PhaseEvent nextPhaseEvent=(nextTimedPhase != null) ? PhaseEventData.createNextPhaseEvent(subscriptionId,activeVersion,nextTimedPhase.getPhase().getName(),processedDate,nextTimedPhase.getStartPhase()) : null;
  final List<SubscriptionBaseEvent> events=new ArrayList<SubscriptionBaseEvent>();
  events.add(creationEvent);
  if (nextPhaseEvent != null) {
    events.add(nextPhaseEvent);
  }
  return events;
}
