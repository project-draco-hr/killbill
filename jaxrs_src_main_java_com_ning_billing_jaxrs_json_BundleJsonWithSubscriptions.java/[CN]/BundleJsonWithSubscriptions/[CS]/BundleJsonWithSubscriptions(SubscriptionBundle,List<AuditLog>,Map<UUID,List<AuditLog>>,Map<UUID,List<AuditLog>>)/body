{
  super(bundle.getId(),bundle.getExternalKey(),auditLogs);
  this.subscriptions=new LinkedList<EntitlementJsonWithEvents>();
  for (  final Subscription cur : bundle.getSubscriptions()) {
    final ImmutableList<SubscriptionEvent> events=ImmutableList.<SubscriptionEvent>copyOf(Collections2.filter(bundle.getTimeline().getSubscriptionEvents(),new Predicate<SubscriptionEvent>(){
      @Override public boolean apply(      @Nullable final SubscriptionEvent input){
        return input.getEntitlementId().equals(cur.getId());
      }
    }
));
    this.subscriptions.add(new EntitlementJsonWithEvents(cur,events,subscriptionsAuditLogs.get(cur.getId()),subscriptionEventsAuditLogs));
  }
}
