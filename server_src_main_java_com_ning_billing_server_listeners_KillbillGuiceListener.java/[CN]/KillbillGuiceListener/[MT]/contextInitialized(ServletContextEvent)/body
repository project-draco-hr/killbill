{
  logger.info("GuiceListener : contextInitialized");
  final String moduleFactoryClassName=event.getServletContext().getInitParameter("guiceModuleFactoryClass");
  if (StringUtils.isEmpty(moduleFactoryClassName)) {
    throw new IllegalStateException("Missing parameter 'guiceModuleFactoryClass' for IrsGuiceListener!");
  }
  try {
    final Class<?> moduleFactoryClass=Class.forName(moduleFactoryClassName);
    if (!GuiceModuleFactory.class.isAssignableFrom(moduleFactoryClass)) {
      throw new IllegalStateException(String.format("%s exists but is not a guice module factory!",moduleFactoryClassName));
    }
    GuiceModuleFactory factory=GuiceModuleFactory.class.cast(moduleFactoryClass.newInstance());
    logger.info("Instantiated " + moduleFactoryClassName + " as the factory for the main guice module.");
    guiceModule=factory.createModule();
  }
 catch (  Exception ex) {
    throw new IllegalStateException(ex);
  }
  super.contextInitialized(event);
  injectorInstance=this.injector(event);
}
