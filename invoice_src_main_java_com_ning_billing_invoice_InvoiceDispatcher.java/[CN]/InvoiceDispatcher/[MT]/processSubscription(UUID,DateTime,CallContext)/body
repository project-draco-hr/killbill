{
  try {
    if (subscriptionId == null) {
      log.error("Failed handling entitlement change.",new InvoiceApiException(ErrorCode.INVOICE_INVALID_TRANSITION));
      return;
    }
    UUID accountId=billingApi.getAccountIdFromSubscriptionId(subscriptionId);
    processAccount(accountId,targetDate,false,context);
  }
 catch (  EntitlementBillingApiException e) {
    log.error("Failed handling entitlement change.",new InvoiceApiException(ErrorCode.INVOICE_NO_ACCOUNT_ID_FOR_SUBSCRIPTION_ID,subscriptionId.toString()));
  }
  return;
}
