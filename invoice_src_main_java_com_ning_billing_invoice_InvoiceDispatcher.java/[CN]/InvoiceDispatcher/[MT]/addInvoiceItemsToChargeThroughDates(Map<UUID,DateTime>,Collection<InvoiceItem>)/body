{
  for (  final InvoiceItem item : items) {
    final UUID subscriptionId=item.getSubscriptionId();
    final DateTime endDate=item.getEndDate();
    if (chargeThroughDates.containsKey(subscriptionId)) {
      if (chargeThroughDates.get(subscriptionId).isBefore(endDate)) {
        chargeThroughDates.put(subscriptionId,endDate);
      }
    }
 else {
      chargeThroughDates.put(subscriptionId,endDate);
    }
  }
}
