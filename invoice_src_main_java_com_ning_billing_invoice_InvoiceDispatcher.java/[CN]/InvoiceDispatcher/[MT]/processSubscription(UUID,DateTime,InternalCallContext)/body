{
  try {
    if (subscriptionId == null) {
      log.error("Failed handling entitlement change.",new InvoiceApiException(ErrorCode.INVOICE_INVALID_TRANSITION));
      return;
    }
    final UUID accountId=entitlementApi.getAccountIdFromSubscriptionId(subscriptionId,context);
    processAccount(accountId,targetDate,false,context);
  }
 catch (  EntitlementUserApiException e) {
    log.error("Failed handling entitlement change.",new InvoiceApiException(ErrorCode.INVOICE_NO_ACCOUNT_ID_FOR_SUBSCRIPTION_ID,subscriptionId.toString()));
  }
}
