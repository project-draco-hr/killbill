{
  RefundModelDao result=paymentDao.getRefund(refundId,context);
  if (result == null) {
    throw new PaymentApiException(ErrorCode.PAYMENT_NO_SUCH_REFUND,refundId);
  }
  final List<RefundModelDao> filteredInput=filterUncompletedPluginRefund(Collections.singletonList(result));
  if (filteredInput.size() == 0) {
    throw new PaymentApiException(ErrorCode.PAYMENT_NO_SUCH_REFUND,refundId);
  }
  if (completePluginCompletedRefund(filteredInput,context)) {
    result=paymentDao.getRefund(refundId,context);
  }
  return new DefaultRefund(result.getId(),result.getCreatedDate(),result.getUpdatedDate(),result.getPaymentId(),result.getAmount(),result.getCurrency(),result.isAdjusted(),result.getCreatedDate(),result.getRefundStatus());
}
