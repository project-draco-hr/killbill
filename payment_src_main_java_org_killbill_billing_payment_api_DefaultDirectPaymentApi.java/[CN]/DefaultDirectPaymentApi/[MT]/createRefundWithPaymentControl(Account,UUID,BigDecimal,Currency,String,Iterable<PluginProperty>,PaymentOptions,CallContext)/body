{
  checkNullParameter(account,"account");
  checkNullParameter(currency,"currency");
  checkNullParameter(directPaymentId,"paymentId");
  checkNullParameter(directPaymentTransactionExternalKey,"paymentTransactionExternalKey");
  checkNullParameter(properties,"plugin properties");
  if (amount != null) {
    checkPositiveAmount(amount);
  }
  final InternalCallContext internalCallContext=internalCallContextFactory.createInternalCallContext(account.getId(),callContext);
  return pluginControlledPaymentProcessor.createRefund(true,account,directPaymentId,amount,currency,directPaymentTransactionExternalKey,properties,paymentOptions.getPaymentControlPluginName(),callContext,internalCallContext);
}
