{
  super("NotificationQ",Executors.newFixedThreadPool(1,new ThreadFactory(){
    @Override public Thread newThread(    final Runnable r){
      final Thread th=new Thread(r);
      th.setName(NOTIFICATION_THREAD_NAME);
      th.setUncaughtExceptionHandler(new UncaughtExceptionHandler(){
        @Override public void uncaughtException(        final Thread t,        final Throwable e){
          log.error("Uncaught exception for thread " + t.getName(),e);
        }
      }
);
      return th;
    }
  }
),NB_THREADS,config);
  this.clock=clock;
  this.config=config;
  this.dao=dbi.onDemand(NotificationSqlDao.class);
  this.internalCallContextFactory=internalCallContextFactory;
  this.hostname=Hostname.get();
  this.nbProcessedEvents=new AtomicLong();
  this.queues=new TreeMap<String,NotificationQueue>();
  this.isStarted=new AtomicBoolean(false);
}
