{
  Currency currency=Currency.USD;
  UUID accountId=UUID.randomUUID();
  Invoice invoice=generator.generateInvoice(accountId,events,existingInvoices,targetDate,currency);
  assertNotNull(invoice);
  assertEquals(invoice.getNumberOfItems(),expectedNumberOfItems);
  existingInvoices.add(invoice);
  assertEquals(invoice.getTotalAmount(),expectedAmount);
}
