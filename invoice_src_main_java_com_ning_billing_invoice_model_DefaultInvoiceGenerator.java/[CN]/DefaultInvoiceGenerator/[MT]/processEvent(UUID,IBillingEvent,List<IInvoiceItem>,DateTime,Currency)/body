{
  BigDecimal rate=event.getPrice(targetCurrency);
  BigDecimal invoiceItemAmount=calculateInvoiceItemAmount(event,targetDate,rate);
  BillingMode billingMode=getBillingMode(event.getBillingMode());
  DateTime billThroughDate=billingMode.calculateEffectiveEndDate(event.getEffectiveDate(),targetDate,event.getBillCycleDay(),event.getBillingPeriod());
  addInvoiceItem(invoiceId,items,event,billThroughDate,invoiceItemAmount,rate,targetCurrency);
}
