{
  BillingMode billingMode=getBillingMode(event.getBillingMode());
  DateTime startDate=event.getEffectiveDate();
  int billingCycleDay=event.getBillCycleDay();
  BillingPeriod billingPeriod=event.getBillingPeriod();
  try {
    return billingMode.calculateNumberOfBillingCycles(startDate,targetDate,billingCycleDay,billingPeriod);
  }
 catch (  InvalidDateSequenceException e) {
    return BigDecimal.ZERO;
  }
}
