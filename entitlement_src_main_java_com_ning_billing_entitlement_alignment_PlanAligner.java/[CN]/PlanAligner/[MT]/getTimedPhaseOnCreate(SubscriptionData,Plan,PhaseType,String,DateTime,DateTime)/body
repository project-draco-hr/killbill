{
  Catalog catalog=catalogService.getFullCatalog();
  PlanSpecifier planSpecifier=new PlanSpecifier(plan.getProduct().getName(),plan.getProduct().getCategory(),plan.getBillingPeriod(),priceList);
  DateTime planStartDate=null;
  PlanAlignmentCreate alignement=null;
  alignement=catalog.planCreateAlignment(planSpecifier,requestedDate);
switch (alignement) {
case START_OF_SUBSCRIPTION:
    planStartDate=subscription.getStartDate();
  break;
case START_OF_BUNDLE:
planStartDate=subscription.getBundleStartDate();
break;
default :
throw new EntitlementError(String.format("Unknwon PlanAlignmentCreate %s",alignement));
}
return getPhaseAlignments(plan,initialPhase,planStartDate);
}
