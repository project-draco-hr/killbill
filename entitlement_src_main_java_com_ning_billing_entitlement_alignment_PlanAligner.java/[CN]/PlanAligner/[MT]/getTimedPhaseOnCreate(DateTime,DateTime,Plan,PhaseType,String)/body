{
  Catalog catalog=catalogService.getCatalog();
  PlanSpecifier planSpecifier=new PlanSpecifier(plan.getProduct().getName(),plan.getProduct().getCategory(),plan.getBillingPeriod(),priceList);
  DateTime planStartDate=null;
  PlanAlignmentCreate alignement=catalog.planCreateAlignment(planSpecifier);
switch (alignement) {
case START_OF_SUBSCRIPTION:
    planStartDate=subscriptionStartDate;
  break;
case START_OF_BUNDLE:
planStartDate=bundleStartDate;
break;
default :
throw new EntitlementError(String.format("Unknwon PlanAlignmentCreate %s",alignement));
}
return getPhaseAlignments(plan,initialPhase,planStartDate);
}
