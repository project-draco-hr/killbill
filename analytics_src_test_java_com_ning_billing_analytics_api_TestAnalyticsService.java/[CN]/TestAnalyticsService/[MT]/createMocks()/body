{
  final PaymentMethod paymentMethod=Mockito.mock(PaymentMethod.class);
  final UUID paymentMethodId=UUID.randomUUID();
  Mockito.when(paymentMethod.getId()).thenReturn(paymentMethodId);
  final Account account=new MockAccountBuilder(UUID.randomUUID()).externalKey(ACCOUNT_KEY).currency(ACCOUNT_CURRENCY).paymentMethodId(paymentMethodId).build();
  try {
    final Account storedAccount=accountApi.createAccount(account,callContext);
    createSubscriptionTransitionEvent(storedAccount);
    createAccountCreationEvent(storedAccount);
    createInvoiceAndPaymentCreationEvents(storedAccount);
  }
 catch (  Throwable t) {
    fail("Initializing accounts failed.",t);
  }
}
