{
  final CallContext context=new DefaultCallContextFactory(clock).createMigrationCallContext("Migration",CallOrigin.INTERNAL,UserType.MIGRATION,clock.getUTCNow(),clock.getUTCNow());
  final Invoice migrationInvoice=new MigrationInvoice(accountId,clock.getUTCNow(),targetDate,currency);
  final InvoiceItem migrationInvoiceItem=new MigrationInvoiceItem(migrationInvoice.getId(),accountId,targetDate,balance,currency);
  migrationInvoice.addInvoiceItem(migrationInvoiceItem);
  dao.create(migrationInvoice,context);
  return migrationInvoice.getId();
}
