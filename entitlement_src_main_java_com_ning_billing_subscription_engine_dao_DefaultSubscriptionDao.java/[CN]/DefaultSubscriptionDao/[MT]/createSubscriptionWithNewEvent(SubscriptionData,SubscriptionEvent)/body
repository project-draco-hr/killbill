{
  final SubscriptionData subscriptionWithNewEvent=new SubscriptionData(subscription,null,clock);
  final List<SubscriptionEvent> allEvents=new LinkedList<SubscriptionEvent>();
  if (subscriptionWithNewEvent.getEvents() != null) {
    allEvents.addAll(subscriptionWithNewEvent.getEvents());
  }
  allEvents.add(newEvent);
  subscriptionWithNewEvent.rebuildTransitions(allEvents,catalogService.getFullCatalog());
  return subscriptionWithNewEvent;
}
