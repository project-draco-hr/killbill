{
  final TenantContext tenantContext=context.createContext(request);
  final Long tenantRecordId=recordIdApi.getRecordId(tenantContext.getTenantId(),ObjectType.TENANT,tenantContext);
  final List<NotificationQueue> queues=notificationQueueService.getNotificationQueues();
  try {
    boolean waitForQueuesToEmpty=true;
    do {
      waitForQueuesToEmpty=areAllNotificationsProcessed(queues,tenantRecordId);
      if (waitForQueuesToEmpty) {
        Thread.sleep(1000);
      }
    }
 while (!waitForQueuesToEmpty);
  }
 catch (  InterruptedException ignore) {
  }
}
