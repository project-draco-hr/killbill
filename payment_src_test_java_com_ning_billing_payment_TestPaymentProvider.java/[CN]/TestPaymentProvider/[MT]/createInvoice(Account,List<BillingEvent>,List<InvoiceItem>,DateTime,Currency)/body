{
  BillingEventSet billingEvents=null;
  InvoiceItemList invoiceItems=null;
  if (events != null) {
    billingEvents=new BillingEventSet();
    billingEvents.addAll(events);
  }
  if (items != null) {
    invoiceItems=new InvoiceItemList();
    invoiceItems.addAll(items);
  }
  Invoice invoice=generator.generateInvoice(account.getId(),billingEvents,invoiceItems,targetDate,currency);
  invoiceApi.add(invoice);
  return invoice;
}
