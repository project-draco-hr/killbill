{
synchronized (monitor) {
    final Invoice invoice=invoices.get(invoicePayment.getInvoiceId());
    if (invoice != null) {
      invoice.addPayment(invoicePayment);
    }
  }
}
