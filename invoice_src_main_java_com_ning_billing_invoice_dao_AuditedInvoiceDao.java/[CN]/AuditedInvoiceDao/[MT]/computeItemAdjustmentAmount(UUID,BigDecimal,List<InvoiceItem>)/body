{
  BigDecimal positiveRepairedAmount=BigDecimal.ZERO;
  final Collection<InvoiceItem> repairedItems=Collections2.filter(invoiceItems,new Predicate<InvoiceItem>(){
    @Override public boolean apply(    @Nullable InvoiceItem input){
      return (input.getInvoiceItemType() == InvoiceItemType.REPAIR_ADJ && input.getLinkedItemId().equals(invoiceItem));
    }
  }
);
  for (  InvoiceItem cur : repairedItems) {
    positiveRepairedAmount=positiveRepairedAmount.add(cur.getAmount().negate());
  }
  return (positiveRepairedAmount.compareTo(requestedPositiveAmountToAdjust) >= 0) ? BigDecimal.ZERO : requestedPositiveAmountToAdjust.subtract(positiveRepairedAmount);
}
