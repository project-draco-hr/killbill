{
  final LocalDate maybeResult=extractLocalDate(inputDate);
  if (maybeResult != null) {
    return maybeResult;
  }
  Account account=null;
  try {
    account=accountId != null ? accountUserApi.getAccountById(accountId,context) : null;
  }
 catch (  AccountApiException e) {
    log.info("Failed to retrieve account for id " + accountId);
  }
  final DateTime inputDateTime=inputDate != null ? DATE_TIME_FORMATTER.parseDateTime(inputDate) : clock.getUTCNow();
  return toLocalDate(account,inputDateTime,context);
}
