{
  super(toAuditLogJson(auditLogs));
  this.accountId=bundle.getAccountId().toString();
  this.bundleId=bundle.getId().toString();
  this.externalKey=bundle.getExternalKey();
  this.subscriptions=new LinkedList<SubscriptionJson>();
  for (  final Subscription cur : bundle.getSubscriptions()) {
    final ImmutableList<SubscriptionEvent> events=ImmutableList.<SubscriptionEvent>copyOf(Collections2.filter(bundle.getTimeline().getSubscriptionEvents(),new Predicate<SubscriptionEvent>(){
      @Override public boolean apply(      @Nullable final SubscriptionEvent input){
        return input.getEntitlementId().equals(cur.getId());
      }
    }
));
    this.subscriptions.add(new SubscriptionJson(cur,events,(subscriptionsAuditLogs != null ? subscriptionsAuditLogs.get(cur.getId()) : null),subscriptionEventsAuditLogs));
  }
}
