{
  final ChargebackJson input=new ChargebackJson(null,null,null,BigDecimal.TEN,payment.getPaymentId(),null,null);
  final String jsonInput=mapper.writeValueAsString(input);
  Response response=doPost(JaxrsResource.CHARGEBACKS_PATH,jsonInput,DEFAULT_EMPTY_QUERY,DEFAULT_HTTP_TIMEOUT_SEC);
  assertEquals(response.getStatusCode(),Status.CREATED.getStatusCode(),response.getResponseBody());
  final String location=response.getHeader("Location");
  assertNotNull(location);
  response=doGetWithUrl(location,DEFAULT_EMPTY_QUERY,DEFAULT_HTTP_TIMEOUT_SEC);
  verifySingleChargebackResponse(response,input);
  response=doGet(JaxrsResource.ACCOUNTS_PATH + "/" + payment.getAccountId()+ "/"+ JaxrsResource.CHARGEBACKS,DEFAULT_EMPTY_QUERY,DEFAULT_HTTP_TIMEOUT_SEC);
  verifyCollectionChargebackResponse(response,input);
  response=doGet(JaxrsResource.PAYMENTS_PATH + "/" + payment.getPaymentId()+ "/"+ JaxrsResource.CHARGEBACKS,DEFAULT_EMPTY_QUERY,DEFAULT_HTTP_TIMEOUT_SEC);
  verifyCollectionChargebackResponse(response,input);
}
