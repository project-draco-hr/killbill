{
  final UUID accountId=UUID.randomUUID();
  final UUID paymentId=UUID.randomUUID();
  final UUID paymentMethodId=UUID.randomUUID();
  plugin.processPayment(accountId,paymentId,paymentMethodId,BigDecimal.TEN,Currency.EUR,callContext);
  final Account account=Mockito.mock(Account.class);
  for (int i=0; i < 10; i++) {
    plugin.processRefund(accountId,paymentId,BigDecimal.ONE,Currency.EUR,callContext);
  }
  try {
    plugin.processRefund(accountId,paymentId,BigDecimal.ONE,Currency.EUR,callContext);
    Assert.fail("Shouldn't have been able to refund");
  }
 catch (  PaymentPluginApiException e) {
    Assert.assertTrue(true);
  }
}
