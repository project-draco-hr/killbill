{
  final String createdBy=Objects.firstNonNull(req.getHeader(HDR_CREATED_BY),req.getRemoteAddr());
  final String reason=req.getHeader(HDR_REASON);
  final String comment=Objects.firstNonNull(req.getHeader(HDR_COMMENT),req.getRequestURI());
  final String tenantIdString=req.getParameter(QUERY_TENANT_ID);
  UUID tenantId=null;
  if (tenantIdString != null) {
    try {
      tenantId=UUID.fromString(tenantIdString);
    }
 catch (    final IllegalArgumentException e) {
      resp.sendError(HttpServletResponse.SC_BAD_REQUEST,"Invalid UUID for tenant id: " + tenantIdString);
      return null;
    }
  }
  return new AnalyticsApiCallContext(createdBy,reason,comment,tenantId);
}
