{
  final String[] rawReportNames=req.getParameterValues(REPORTS_QUERY_NAME);
  if (rawReportNames == null || rawReportNames.length == 0) {
    resp.sendError(404);
    return;
  }
  final LocalDate startDate=Strings.emptyToNull(req.getParameter(QUERY_START_DATE)) != null ? DATE_FORMAT.parseLocalDate(req.getParameter(QUERY_START_DATE)) : null;
  final LocalDate endDate=Strings.emptyToNull(req.getParameter(QUERY_END_DATE)) != null ? DATE_FORMAT.parseLocalDate(req.getParameter(QUERY_END_DATE)) : null;
  final SmootherType smootherType=Smoother.fromString(Strings.emptyToNull(req.getParameter(REPORTS_SMOOTHER_NAME)));
  final List<NamedXYTimeSeries> result=reportsUserApi.getTimeSeriesDataForReport(rawReportNames,startDate,endDate,smootherType);
  resp.getOutputStream().write(mapper.writeValueAsBytes(result));
  resp.setContentType("application/json");
  setCrossSiteScriptingHeaders(resp);
  resp.setStatus(HttpServletResponse.SC_OK);
}
