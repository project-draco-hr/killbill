{
  UUID me=UUID.randomUUID();
  String dbiString="jdbc:mysql://127.0.0.1:3306/killbill?createDatabaseIfNotExist=true";
  DBI dbi=new DBI(dbiString,"root","root");
  IEventSqlDao dao=dbi.onDemand(IEventSqlDao.class);
  String productName="Shotgun";
  BillingPeriod term=BillingPeriod.MONTHLY;
  String planSetName="standard";
  DateTime now=new DateTime();
  IPlan plan=null;
  try {
    plan=catalog.findPlan(productName,term,planSetName);
  }
 catch (  CatalogApiException e) {
    e.printStackTrace();
  }
  IEvent event=new ApiEventCreate(UUID.randomUUID(),now,now,plan.getName(),"evergreen",planSetName,now,now,1);
  dao.insertEvent(event);
  sleep();
  List<IEvent> events=dao.getReadyEvents(new DateTime().toDate(),1);
  dao.claimEvent(me.toString(),now.plusDays(1).toDate(),events.get(0).getId().toString(),now.toDate());
  dao.clearEvent(events.get(0).getId().toString(),me.toString());
  System.out.println("youpi");
}
