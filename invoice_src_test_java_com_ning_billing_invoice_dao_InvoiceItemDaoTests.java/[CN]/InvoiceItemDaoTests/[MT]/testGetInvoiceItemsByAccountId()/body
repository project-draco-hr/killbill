{
  UUID accountId=UUID.randomUUID();
  UUID bundleId=UUID.randomUUID();
  DateTime targetDate=new DateTime(2011,5,23,0,0,0,0);
  DefaultInvoice invoice=new DefaultInvoice(accountId,targetDate,Currency.USD,clock);
  invoiceDao.create(invoice);
  UUID invoiceId=invoice.getId();
  DateTime startDate=new DateTime(2011,3,1,0,0,0,0);
  BigDecimal rate=new BigDecimal("20.00");
  UUID subscriptionId=UUID.randomUUID();
  RecurringInvoiceItem item=new RecurringInvoiceItem(invoiceId,subscriptionId,bundleId,"test plan","test phase",startDate,startDate.plusMonths(1),rate,rate,Currency.USD,clock.getUTCNow());
  recurringInvoiceItemDao.create(item);
  List<InvoiceItem> items=recurringInvoiceItemDao.getInvoiceItemsByAccount(accountId.toString());
  assertEquals(items.size(),1);
}
