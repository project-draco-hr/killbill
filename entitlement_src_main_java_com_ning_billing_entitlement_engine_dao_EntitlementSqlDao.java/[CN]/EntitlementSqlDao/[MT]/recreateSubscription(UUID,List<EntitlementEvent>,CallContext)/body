{
  eventsDao.inTransaction(new Transaction<Void,EventSqlDao>(){
    @Override public Void inTransaction(    EventSqlDao transactional,    TransactionStatus status) throws Exception {
      List<String> eventIds=new ArrayList<String>();
      for (      final EntitlementEvent cur : recreateEvents) {
        transactional.insertEvent(cur,context);
        eventIds.add(cur.getId().toString());
        recordFutureNotificationFromTransaction(transactional,cur.getEffectiveDate(),new EntitlementNotificationKey(cur.getId()));
      }
      AuditSqlDao auditSqlDao=transactional.become(AuditSqlDao.class);
      auditSqlDao.insertAuditFromTransaction(ENTITLEMENT_EVENTS_TABLE_NAME,eventIds,ChangeType.INSERT,context);
      return null;
    }
  }
);
}
