{
  eventsDao.inTransaction(new Transaction<Void,EventSqlDao>(){
    @Override public Void inTransaction(    EventSqlDao transactional,    TransactionStatus status) throws Exception {
      cancelNextCancelEventFromTransaction(subscriptionId,transactional,context);
      cancelNextChangeEventFromTransaction(subscriptionId,transactional,context);
      cancelNextPhaseEventFromTransaction(subscriptionId,transactional,context);
      transactional.insertEvent(cancelEvent,context);
      AuditSqlDao auditSqlDao=transactional.become(AuditSqlDao.class);
      String cancelEventId=cancelEvent.getId().toString();
      auditSqlDao.insertAuditFromTransaction(ENTITLEMENT_EVENTS_TABLE_NAME,cancelEventId,ChangeType.INSERT,context);
      recordFutureNotificationFromTransaction(transactional,cancelEvent.getEffectiveDate(),new EntitlementNotificationKey(cancelEvent.getId(),seqId));
      return null;
    }
  }
);
}
