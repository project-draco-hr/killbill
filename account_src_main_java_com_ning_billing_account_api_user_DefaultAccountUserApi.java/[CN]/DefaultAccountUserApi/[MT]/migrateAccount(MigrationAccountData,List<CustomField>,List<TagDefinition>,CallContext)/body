{
  final DateTime createdDate=data.getCreatedDate() == null ? context.getCreatedDate() : data.getCreatedDate();
  final DateTime updatedDate=data.getUpdatedDate() == null ? context.getUpdatedDate() : data.getUpdatedDate();
  final CallContext migrationContext=factory.toMigrationCallContext(context,createdDate,updatedDate);
  final Account account=new DefaultAccount(data);
  try {
    accountDao.create(account,migrationContext);
    tagDao.insertTags(account.getId(),ObjectType.ACCOUNT,tagDefinitions,context);
    customFieldDao.saveEntities(account.getId(),ObjectType.ACCOUNT,fields,context);
  }
 catch (  EntityPersistenceException e) {
    throw new AccountApiException(e,ErrorCode.ACCOUNT_CREATION_FAILED);
  }
  return account;
}
