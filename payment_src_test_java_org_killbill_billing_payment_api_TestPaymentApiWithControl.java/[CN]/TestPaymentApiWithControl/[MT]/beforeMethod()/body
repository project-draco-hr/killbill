{
  super.beforeMethod();
  account=testHelper.createTestAccount("bobo@gmail.com",true);
  final PaymentMethodPlugin paymentMethodInfo=new DefaultNoOpPaymentMethodPlugin(UUID.randomUUID().toString(),false,null);
  newPaymentMethodId=paymentApi.addPaymentMethod(account,paymentMethodInfo.getExternalPaymentMethodId(),MockPaymentProviderPlugin.PLUGIN_NAME,false,paymentMethodInfo,ImmutableList.<PluginProperty>of(),callContext);
  controlPluginRegistry.registerService(new OSGIServiceDescriptor(){
    @Override public String getPluginSymbolicName(){
      return null;
    }
    @Override public String getPluginName(){
      return TestPaymentControlPluginApi.PLUGIN_NAME;
    }
    @Override public String getRegistrationName(){
      return TestPaymentControlPluginApi.PLUGIN_NAME;
    }
  }
,new TestPaymentControlPluginApi(newPaymentMethodId));
}
