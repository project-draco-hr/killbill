{
synchronized (this) {
    final PaymentModelDao payment=payments.get(directPaymentId);
    if (payment != null) {
      payment.setStateName(currentPaymentStateName);
    }
    final PaymentTransactionModelDao transaction=transactions.get(directTransactionId);
    if (transaction != null) {
      transaction.setTransactionStatus(paymentStatus);
      transaction.setProcessedAmount(processedAmount);
      transaction.setProcessedCurrency(processedCurrency);
      transaction.setGatewayErrorCode(gatewayErrorCode);
      transaction.setGatewayErrorMsg(gatewayErrorMsg);
    }
  }
}
