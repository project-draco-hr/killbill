{
synchronized (this) {
    final DirectPaymentModelDao payment=payments.get(directPaymentId);
    if (payment != null) {
      payment.setCurrentStateName(currentPaymentStateName);
    }
    final DirectPaymentTransactionModelDao transaction=transactions.get(directTransactionId);
    if (transaction != null) {
      transaction.setPaymentStatus(paymentStatus);
      transaction.setProcessedAmount(processedAmount);
      transaction.setProcessedCurrency(processedCurrency);
      transaction.setGatewayErrorCode(gatewayErrorCode);
      transaction.setGatewayErrorMsg(gatewayErrorMsg);
    }
  }
}
