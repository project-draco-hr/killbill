{
  final DateTime futureNotificationTime=testReferenceTime.plusDays(nbDaysInFuture);
  poster.insertOverdueCheckNotification(overdueable,futureNotificationTime,internalCallContext);
  final OverdueCheckNotificationKey notificationKey=new OverdueCheckNotificationKey(overdueable.getId(),Type.get(overdueable));
  final Collection<NotificationEventWithMetadata<OverdueCheckNotificationKey>> notificationsForKey=getNotificationsForOverdueable(overdueable);
  Assert.assertEquals(notificationsForKey.size(),1);
  final NotificationEventWithMetadata nm=notificationsForKey.iterator().next();
  Assert.assertEquals(nm.getEvent(),notificationKey);
  Assert.assertEquals(nm.getEffectiveDate(),testReferenceTime.plusDays(expectedNbDaysInFuture));
}
