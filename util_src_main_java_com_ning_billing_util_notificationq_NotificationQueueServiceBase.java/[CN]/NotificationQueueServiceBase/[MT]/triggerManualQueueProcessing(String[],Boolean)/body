{
  int result=0;
  List<NotificationQueue> manualQueues=null;
  if (services == null) {
    manualQueues=new ArrayList<NotificationQueue>(queues.values());
  }
 else {
    final Joiner join=Joiner.on(",");
    join.join(services);
    log.info("Trigger manual processing for services {} ",join.toString());
    manualQueues=new LinkedList<NotificationQueue>();
synchronized (queues) {
      for (      final String svc : services) {
        addQueuesForService(manualQueues,svc);
      }
    }
  }
  for (  final NotificationQueue cur : manualQueues) {
    int processedNotifications=0;
    do {
      processedNotifications=cur.processReadyNotification();
      log.info("Got {} results from queue {}",processedNotifications,cur.getFullQName());
      result+=processedNotifications;
    }
 while (keepRunning && processedNotifications > 0);
  }
  return result;
}
