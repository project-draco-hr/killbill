{
  final String rootDirPath=osgiConfig.getRootInstallationDir() + "/" + pluginLanguage.toString().toLowerCase();
  final File rootDir=new File(rootDirPath);
  if (!rootDir.exists() || !rootDir.isDirectory()) {
    logger.warn("Configuration root dir {} is not a valid directory",rootDirPath);
    return;
  }
  final File[] files=rootDir.listFiles();
  if (files == null) {
    return;
  }
  for (  final File curPlugin : files) {
    if (!curPlugin.isDirectory()) {
      logger.warn("Skipping entry {} in directory {}",curPlugin.getName(),rootDir.getAbsolutePath());
      continue;
    }
    final String pluginName=curPlugin.getName();
    final File[] filesInDir=curPlugin.listFiles();
    if (filesInDir == null) {
      continue;
    }
    for (    final File curVersion : filesInDir) {
      if (!curVersion.isDirectory()) {
        logger.warn("Skipping entry {} in directory {}",curPlugin.getName(),rootDir.getAbsolutePath());
        continue;
      }
      final String version=curVersion.getName();
      final T plugin=extractPluginConfig(pluginLanguage,pluginName,version,curVersion);
      List<T> curPluginVersionlist=(List<T>)allPlugins.get(plugin.getPluginName());
      if (curPluginVersionlist == null) {
        curPluginVersionlist=new LinkedList<T>();
        allPlugins.put(plugin.getPluginName(),curPluginVersionlist);
      }
      curPluginVersionlist.add(plugin);
      logger.info("Adding plugin {} ",plugin.getPluginVersionnedName());
    }
  }
}
