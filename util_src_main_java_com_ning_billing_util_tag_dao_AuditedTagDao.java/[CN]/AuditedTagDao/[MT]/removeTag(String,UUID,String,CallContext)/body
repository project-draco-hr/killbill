{
  tagSqlDao.inTransaction(new Transaction<Void,TagSqlDao>(){
    @Override public Void inTransaction(    final TagSqlDao tagSqlDao,    final TransactionStatus status) throws Exception {
      Tag tag=tagSqlDao.findTag(tagName,objectId.toString(),objectType);
      if (tag == null) {
        throw new InvoiceApiException(ErrorCode.TAG_DOES_NOT_EXIST,tagName);
      }
      tagSqlDao.removeTagFromTransaction(tagName,objectId.toString(),objectType,context);
      TagAuditSqlDao auditDao=tagSqlDao.become(TagAuditSqlDao.class);
      auditDao.removeTagFromTransaction(tag.getId().toString(),context);
      return null;
    }
  }
);
}
