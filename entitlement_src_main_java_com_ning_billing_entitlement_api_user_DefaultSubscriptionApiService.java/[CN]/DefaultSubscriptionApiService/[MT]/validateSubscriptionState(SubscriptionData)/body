{
  final SubscriptionState currentState=subscription.getState();
  if (currentState != SubscriptionState.ACTIVE) {
    throw new EntitlementUserApiException(ErrorCode.ENT_CHANGE_NON_ACTIVE,subscription.getId(),currentState);
  }
  if (subscription.isSubscriptionFutureCancelled()) {
    throw new EntitlementUserApiException(ErrorCode.ENT_CHANGE_FUTURE_CANCELLED,subscription.getId());
  }
}
