{
  final InAdvanceBillingMode billingMode=new InAdvanceBillingMode();
  final LocalDate startDate=new LocalDate(2012,7,16);
  final LocalDate endDate=new LocalDate(2012,8,16);
  final LocalDate targetDate=new LocalDate(2012,7,16);
  final DateTimeZone dateTimeZone=DateTimeZone.forID("Pacific/Pitcairn");
  final int billingCycleDayLocal=16;
  final BillingPeriod billingPeriod=BillingPeriod.MONTHLY;
  final List<RecurringInvoiceItemData> invoiceItems=billingMode.calculateInvoiceItemData(startDate,endDate,targetDate,dateTimeZone,billingCycleDayLocal,billingPeriod);
  Assert.assertEquals(invoiceItems.size(),1);
  Assert.assertEquals(invoiceItems.get(0).getStartDate(),startDate);
  Assert.assertEquals(invoiceItems.get(0).getEndDate(),endDate);
  Assert.assertEquals(invoiceItems.get(0).getNumberOfCycles(),BigDecimal.ONE);
}
