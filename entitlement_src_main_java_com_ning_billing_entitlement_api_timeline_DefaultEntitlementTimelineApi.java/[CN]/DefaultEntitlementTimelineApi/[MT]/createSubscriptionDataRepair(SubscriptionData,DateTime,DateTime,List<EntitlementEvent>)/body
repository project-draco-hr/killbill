{
  final SubscriptionBuilder builder=new SubscriptionBuilder(curData);
  builder.setActiveVersion(curData.getActiveVersion() + 1);
  if (newBundleStartDate != null) {
    builder.setBundleStartDate(newBundleStartDate);
  }
  if (newSubscriptionStartDate != null) {
    builder.setStartDate(newSubscriptionStartDate);
  }
  if (initialEvents.size() > 0) {
    for (    final EntitlementEvent cur : initialEvents) {
      cur.setActiveVersion(builder.getActiveVersion());
    }
  }
  return (SubscriptionDataRepair)factory.createSubscription(builder,initialEvents);
}
