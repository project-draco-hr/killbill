{
  UUID accountId=UUID.randomUUID();
  TagStore tagStore=new DefaultTagStore(accountId,Account.ObjectType);
  String definitionName="MixedTagTest";
  TagDefinition tagDefinition=null;
  try {
    tagDefinition=tagDefinitionDao.create(definitionName,"Test tag for some test purpose",context);
  }
 catch (  TagDefinitionApiException e) {
    fail("Tag definition creation failed.",e);
  }
  DescriptiveTag descriptiveTag=new DescriptiveTag(tagDefinition);
  tagStore.add(descriptiveTag);
  assertEquals(tagStore.generateInvoice(),true);
  ControlTag controlTag=new DefaultControlTag(ControlTagType.AUTO_INVOICING_OFF);
  tagStore.add(controlTag);
  assertEquals(tagStore.generateInvoice(),false);
  tagDao.saveTagsFromTransaction(dao,accountId,Account.ObjectType,tagStore.getEntityList(),context);
  tagStore.clear();
  assertEquals(tagStore.getEntityList().size(),0);
  List<Tag> tagList=tagDao.loadTags(accountId,Account.ObjectType);
  tagStore.add(tagList);
  assertEquals(tagList.size(),2);
  assertEquals(tagStore.generateInvoice(),false);
}
