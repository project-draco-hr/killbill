{
  final String definitionName="TestTag1234567";
  try {
    tagDefinitionDao.create(definitionName,"Some test tag",internalCallContext);
  }
 catch (  TagDefinitionApiException e) {
    fail("Could not create tag definition",e);
  }
  final TagDefinition tagDefinition=tagDefinitionDao.getByName(definitionName,internalCallContext);
  assertNotNull(tagDefinition);
  final UUID objectId=UUID.randomUUID();
  final Tag tag=tagDefinition.isControlTag() ? new DefaultControlTag(ControlTagType.getTypeFromId(tagDefinition.getId()),ObjectType.ACCOUNT,objectId,internalCallContext.getCreatedDate()) : new DescriptiveTag(tagDefinition.getId(),ObjectType.ACCOUNT,objectId,internalCallContext.getCreatedDate());
  tagDao.create(tag,internalCallContext);
  tagDao.deleteTag(objectId,ObjectType.ACCOUNT,tagDefinition.getId(),internalCallContext);
  try {
    tagDefinitionDao.deleteById(tagDefinition.getId(),internalCallContext);
  }
 catch (  TagDefinitionApiException e) {
    fail("Could not delete tag definition",e);
  }
}
