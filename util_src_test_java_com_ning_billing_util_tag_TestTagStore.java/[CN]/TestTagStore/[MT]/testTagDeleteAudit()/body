{
  UUID accountId=UUID.randomUUID();
  TagStore tagStore=new DefaultTagStore(accountId,Account.ObjectType);
  Tag tag=new DescriptiveTag(testTag);
  tagStore.add(tag);
  tagDao.saveTags(accountId,Account.ObjectType,tagStore.getEntityList(),context);
  tagStore.remove(tag);
  tagDao.saveTags(accountId,Account.ObjectType,tagStore.getEntityList(),context);
  List<Tag> savedTags=tagDao.loadTags(accountId,Account.ObjectType);
  assertEquals(savedTags.size(),0);
  Handle handle=dbi.open();
  String query=String.format("select * from audit_log where table_name = 'tag' and record_id='%s' and change_type='DELETE'",tag.getId().toString());
  List<Map<String,Object>> result=handle.select(query);
  assertNotNull(result);
  assertEquals(result.size(),1);
  assertNotNull(result.get(0).get("change_date"));
  DateTime changeDate=new DateTime(result.get(0).get("change_date"));
  assertTrue(Seconds.secondsBetween(changeDate,context.getUpdatedDate()).getSeconds() < 2);
  assertEquals(result.get(0).get("changed_by"),context.getUserName());
}
