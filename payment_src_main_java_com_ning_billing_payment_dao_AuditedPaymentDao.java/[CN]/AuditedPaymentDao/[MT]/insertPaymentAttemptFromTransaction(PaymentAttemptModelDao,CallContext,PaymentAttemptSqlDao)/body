{
  transactional.insertPaymentAttempt(attempt,context);
  PaymentAttemptModelDao savedAttempt=transactional.getPaymentAttempt(attempt.getId().toString());
  Long recordId=transactional.getRecordId(savedAttempt.getId().toString());
  EntityHistory<PaymentAttemptModelDao> history=new EntityHistory<PaymentAttemptModelDao>(savedAttempt.getId(),recordId,savedAttempt,ChangeType.INSERT);
  transactional.insertHistoryFromTransaction(history,context);
  Long historyRecordId=transactional.getHistoryRecordId(recordId);
  EntityAudit audit=new EntityAudit(TableName.PAYMENT_ATTEMPTS,historyRecordId,ChangeType.INSERT);
  transactional.insertAuditFromTransaction(audit,context);
  return savedAttempt;
}
