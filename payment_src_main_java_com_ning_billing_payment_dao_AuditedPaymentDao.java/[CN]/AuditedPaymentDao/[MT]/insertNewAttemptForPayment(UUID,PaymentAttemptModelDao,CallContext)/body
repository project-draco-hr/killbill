{
  return paymentAttemptSqlDao.inTransaction(new Transaction<PaymentAttemptModelDao,PaymentAttemptSqlDao>(){
    @Override public PaymentAttemptModelDao inTransaction(    final PaymentAttemptSqlDao transactional,    final TransactionStatus status) throws Exception {
      final PaymentAttemptModelDao savedAttempt=insertPaymentAttemptFromTransaction(attempt,context,transactional);
      final PaymentSqlDao transPaymentSqlDao=transactional.become(PaymentSqlDao.class);
      updatePaymentAmountFromTransaction(paymentId,savedAttempt.getRequestedAmount(),context,transPaymentSqlDao);
      return savedAttempt;
    }
  }
);
}
