{
  try {
    final PaymentMethod data=json.toPaymentMethod();
    final Account account=accountApi.getAccountById(data.getAccountId());
    final UUID paymentMethodId=paymentApi.addPaymentMethod(data.getPluginName(),account,isDefault,data.getPluginDetail(),context.createContext(createdBy,reason,comment));
    return uriBuilder.buildResponse(PaymentMethodResource.class,"getPaymentMethod",paymentMethodId,uriInfo.getBaseUri().toString());
  }
 catch (  AccountApiException e) {
    if (e.getCode() == ErrorCode.ACCOUNT_DOES_NOT_EXIST_FOR_ID.getCode()) {
      return Response.status(Status.NO_CONTENT).build();
    }
 else {
      return Response.status(Status.BAD_REQUEST).build();
    }
  }
catch (  PaymentApiException e) {
    final String error=String.format("Failed to create payment Method  %s",json);
    log.info(error,e);
    return Response.status(Status.BAD_REQUEST).entity(error).build();
  }
catch (  IllegalArgumentException e) {
    return Response.status(Status.BAD_REQUEST).entity(e.getMessage()).build();
  }
}
